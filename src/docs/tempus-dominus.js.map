{"version":3,"file":"tempus-dominus.js","sources":["../js/datetime.ts","../js/conts.ts","../js/display/collapse.ts","../js/actions.ts","../js/display/calendar/date-display.ts","../js/display/calendar/month-display.ts","../js/display/calendar/year-display.ts","../js/dates.ts","../js/display/calendar/decade-display.ts","../js/display/time/time-display.ts","../js/display/time/hour-display.ts","../js/display/time/minute-display.ts","../js/display/time/second-display.ts","../js/display/index.ts","../js/validation.ts","../js/tempus-dominus.ts"],"sourcesContent":["import { Options } from \"./conts\";\r\n\r\nexport enum Unit {\r\n    seconds = 'seconds',\r\n    minutes = 'minutes',\r\n    hours = 'hours',\r\n    date = 'date',\r\n    month = 'month',\r\n    year = 'year',\r\n}\r\n\r\ninterface DateTimeFormatOptions extends Intl.DateTimeFormatOptions {\r\n    timeStyle?: 'short' | 'medium' | 'long';\r\n    dateStyle?: 'short' | 'medium' | 'long' | 'full';\r\n}\r\n\r\n/**\r\n * For the most part this object behaves exactly the same way\r\n * as the native Date object with a little extra spice.\r\n */\r\nexport class DateTime extends Date {\r\n    /**\r\n     * Used with Intl.DateTimeFormat\r\n     */\r\n    locale = 'default';\r\n\r\n    /**\r\n     * Chainable way to set the {@link locale}\r\n     * @param value\r\n     */\r\n    setLocale(value: string): this {\r\n        this.locale = value;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Converts a plain JS date object to a DateTime object.\r\n     * Doing this allows access to format, etc.\r\n     * @param  date\r\n     */\r\n    static convert(date: Date): DateTime {\r\n        if (!date) throw `A date is required`;\r\n        return new DateTime(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\r\n    }\r\n\r\n    /**\r\n     * Native date manipulations are not pure functions. This function creates a duplicate of the DateTime object.\r\n     */\r\n    get clone() {\r\n        return new DateTime(this.year, this.month, this.date, this.hours, this.minutes, this.seconds, this.getMilliseconds()).setLocale(this.locale);\r\n    }\r\n\r\n    /**\r\n     * Sets the current date to the start of the {@link unit} provided\r\n     * Example: Consider a date of \"April 30, 2021, 11:45:32.984 AM\" => new DateTime(2021, 3, 30, 11, 45, 32, 984).startOf('month')\r\n     * would return April 1, 2021, 12:00:00.000 AM (midnight)\r\n     * @param unit\r\n     */\r\n    startOf(unit: Unit | 'weekDay'): this {\r\n        if (this[unit] === undefined) throw `Unit '${unit}' is not valid`;\r\n        switch (unit) {\r\n            case 'seconds':\r\n                this.setMilliseconds(0);\r\n                break;\r\n            case 'minutes':\r\n                this.setSeconds(0, 0);\r\n                break;\r\n            case 'hours':\r\n                this.setMinutes(0, 0, 0);\r\n                break;\r\n            case 'date':\r\n                this.setHours(0, 0, 0, 0);\r\n                break;\r\n            case 'weekDay':\r\n                this.startOf(Unit.date);\r\n                this.manipulate(0 - this.weekDay, Unit.date)\r\n                break;\r\n            case 'month':\r\n                this.startOf(Unit.date);\r\n                this.setDate(1);\r\n                break;\r\n            case 'year':\r\n                this.startOf(Unit.date);\r\n                this.setMonth(0, 1);\r\n                break;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Sets the current date to the end of the {@link unit} provided\r\n     * Example: Consider a date of \"April 30, 2021, 11:45:32.984 AM\" => new DateTime(2021, 3, 30, 11, 45, 32, 984).endOf('month')\r\n     * would return April 30, 2021, 11:59:59.999 PM\r\n     * @param unit\r\n     */\r\n    endOf(unit: Unit | 'weekDay'): this {\r\n        if (this[unit] === undefined) throw `Unit '${unit}' is not valid`;\r\n        switch (unit) {\r\n            case 'seconds':\r\n                this.setMilliseconds(999);\r\n                break;\r\n            case 'minutes':\r\n                this.setSeconds(59, 999);\r\n                break;\r\n            case 'hours':\r\n                this.setMinutes(59, 59, 999);\r\n                break;\r\n            case 'date':\r\n                this.setHours(23, 59, 59, 999);\r\n                break;\r\n            case 'weekDay':\r\n                this.startOf(Unit.date);\r\n                this.manipulate(6 - this.weekDay, Unit.date);\r\n                break;\r\n            case 'month':\r\n                this.endOf(Unit.date);\r\n                this.manipulate(1, Unit.month);\r\n                this.setDate(0);\r\n                break;\r\n            case 'year':\r\n                this.endOf(Unit.date);\r\n                this.manipulate(1, Unit.year);\r\n                this.setDate(0);\r\n                break;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Change a {@link unit} value. Value can be positive or negative\r\n     * Example: Consider a date of \"April 30, 2021, 11:45:32.984 AM\" => new DateTime(2021, 3, 30, 11, 45, 32, 984).manipulate(1, 'month')\r\n     * would return May 30, 2021, 11:45:32.984 AM\r\n     * @param value A positive or negative number\r\n     * @param unit\r\n     */\r\n    manipulate(value: number, unit: Unit): this {\r\n        if (this[unit] === undefined) throw `Unit '${unit}' is not valid`;\r\n        this[unit] += value;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Returns a string format.\r\n     * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat\r\n     * for valid templates and locale objects\r\n     * @param template An object. Uses browser defaults otherwise.\r\n     * @param locale Can be a string or an array of strings. Uses browser defaults otherwise.\r\n     */\r\n    format(template: DateTimeFormatOptions, locale = this.locale): string {\r\n        return new Intl.DateTimeFormat(locale, template).format(this);\r\n    }\r\n\r\n    formatWithOptions(options: Options) {\r\n        let components = options.display.components;\r\n        return this.format({\r\n            year: components.date ? 'numeric' : undefined,\r\n            month: components.date ? '2-digit' : undefined,\r\n            day: components.date ? '2-digit' : undefined,\r\n            hour: components.hours ? components.useTwentyfourHour ? '2-digit' : 'numeric' : undefined,\r\n            minute: components.minutes ? '2-digit' : undefined,\r\n            second: components.seconds ? '2-digit' : undefined,\r\n            hour12: !components.useTwentyfourHour\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Return true if {@link compare} is before this date\r\n     * @param compare The Date/DateTime to compare\r\n     * @param unit If provided, uses {@link startOf} for\r\n     * comparision.\r\n     */\r\n    isBefore(compare: DateTime, unit: Unit): boolean {\r\n        if (!unit) return this < compare;\r\n        if (this[unit] === undefined) throw `Unit '${unit}' is not valid`;\r\n        return this.clone.startOf(unit).valueOf() < compare.clone.startOf(unit).valueOf();\r\n    }\r\n\r\n    /**\r\n     * Return true if {@link compare} is after this date\r\n     * @param compare The Date/DateTime to compare\r\n     * @param unit If provided, uses {@link startOf} for\r\n     * comparision.\r\n     */\r\n    isAfter(compare: DateTime, unit: Unit): boolean {\r\n        if (!unit) return this > compare;\r\n        if (this[unit] === undefined) throw `Unit '${unit}' is not valid`;\r\n        return this.clone.startOf(unit).valueOf() > compare.clone.startOf(unit).valueOf();\r\n    }\r\n\r\n    /**\r\n     * Return true if {@link compare} is same this date\r\n     * @param compare The Date/DateTime to compare\r\n     * @param unit If provided, uses {@link startOf} for\r\n     * comparision.\r\n     */\r\n    isSame(compare: DateTime, unit?: Unit): boolean {\r\n        if (!unit) return this.valueOf() === compare.valueOf();\r\n        if (this[unit] === undefined) throw `Unit '${unit}' is not valid`;\r\n        compare = DateTime.convert(compare);\r\n        return (\r\n            this.clone.startOf(unit).valueOf() === compare.startOf(unit).valueOf()\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Check if this is between two other DateTimes, optionally looking at unit scale. The match is exclusive.\r\n     * @param left\r\n     * @param right\r\n     * @param unit.\r\n     * @param inclusivity. A [ indicates inclusion of a value. A ( indicates exclusion.\r\n     * If the inclusivity parameter is used, both indicators must be passed.\r\n     */\r\n    isBetween(left: DateTime, right: DateTime, unit?: Unit, inclusivity: '()' | '[]' | '(]' | '[)' = '()'): boolean {\r\n        if (this[unit] === undefined) throw `Unit '${unit}' is not valid`;\r\n        const leftInclusivity = inclusivity[0] === '(';\r\n        const rightInclusivity = inclusivity[1] === ')';\r\n\r\n        return (\r\n            ((leftInclusivity ? this.isAfter(left, unit) : !this.isBefore(left, unit)) &&\r\n                (rightInclusivity ? this.isBefore(right, unit) : !this.isAfter(right, unit))) ||\r\n            ((leftInclusivity ? this.isBefore(left, unit) : !this.isAfter(left, unit)) &&\r\n                (rightInclusivity ? this.isAfter(right, unit) : !this.isBefore(right, unit)))\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Returns flattened object of the date. Does not include literals\r\n     * @param locale\r\n     * @param template\r\n     */\r\n    parts(locale = this.locale, template: any = { dateStyle: 'full', timeStyle: 'long' }) {\r\n        const parts = {}\r\n        new Intl.DateTimeFormat(locale, template).formatToParts(this).filter(x => x.type !== 'literal').forEach(x => parts[x.type] = x.value)\r\n        return parts;\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.getSeconds()\r\n     */\r\n    get seconds(): number {\r\n        return this.getSeconds();\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.setSeconds()\r\n     */\r\n    set seconds(value: number) {\r\n        this.setSeconds(value);\r\n    }\r\n\r\n    /**\r\n     * Returns two digit hours\r\n     */\r\n    get secondsFormatted(): string {\r\n        return this.seconds < 10 ? (`0${this.seconds}`) : `${this.seconds}`;\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.getMinutes()\r\n     */\r\n    get minutes(): number {\r\n        return this.getMinutes();\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.setMinutes()\r\n     */\r\n    set minutes(value: number) {\r\n        this.setMinutes(value);\r\n    }\r\n\r\n    /**\r\n     * Returns two digit hours\r\n     */\r\n    get minutesFormatted(): string {\r\n        return this.minutes < 10 ? (`0${this.minutes}`) : `${this.minutes}`;\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.getHours()\r\n     */\r\n    get hours(): number {\r\n        return this.getHours();\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.setHours()\r\n     */\r\n    set hours(value: number) {\r\n        this.setHours(value);\r\n    }\r\n\r\n    /**\r\n     * Returns two digit hours\r\n     */\r\n    get hoursFormatted(): string {\r\n        return this.hours < 10 ? (`0${this.hours}`) : `${this.hours}`;\r\n    }\r\n\r\n    /**\r\n     * Returns two digit hours but in twelve hour mode e.g. 13 -> 1\r\n     */\r\n    get twelveHoursFormatted(): string {\r\n        let hour = this.hours;\r\n        if (hour > 12) hour = hour - 12;\r\n        if (hour === 0) hour = 12;\r\n        return hour < 10 ? (`0${hour}`) : `${hour}`;\r\n    }\r\n\r\n    /**\r\n     * Get the meridiem of the date. E.g. AM or PM.\r\n     * If the {@link locale} provides a \"dayPeriod\" then this will be returned,\r\n     * otherwise it will return AM or PM.\r\n     * @param locale\r\n     */\r\n    meridiem(locale: string = this.locale): string {\r\n        const dayPeriod = new Intl.DateTimeFormat(locale, {\r\n            hour: 'numeric',\r\n            dayPeriod: 'narrow'\r\n        } as any)\r\n            .formatToParts(this)\r\n            .find(p => p.type === 'dayPeriod')?.value;\r\n        return dayPeriod ? dayPeriod : this.getHours() <= 12 ? 'AM' : 'PM';\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.getDate()\r\n     */\r\n    get date(): number {\r\n        return this.getDate();\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.setDate()\r\n     */\r\n    set date(value: number) {\r\n        this.setDate(value);\r\n    }\r\n\r\n    /**\r\n     * Return two digit date\r\n     */\r\n    get dateFormatted(): string {\r\n        return this.date < 10 ? (`0${this.date}`) : `${this.date}`;\r\n    }\r\n\r\n    // https://github.com/you-dont-need/You-Dont-Need-Momentjs#week-of-year\r\n    /**\r\n     * Gets the week of the year\r\n     */\r\n    get week(): number {\r\n        const MILLISECONDS_IN_WEEK = 604800000;\r\n        const firstDayOfWeek = 1; // monday as the first day (0 = sunday)\r\n        const startOfYear = new Date(this.year, 0, 1);\r\n        startOfYear.setDate(\r\n            startOfYear.getDate() + (firstDayOfWeek - (startOfYear.getDay() % 7))\r\n        );\r\n        return Math.round((this.valueOf() - startOfYear.valueOf()) / MILLISECONDS_IN_WEEK) + 1;\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.getDay()\r\n     */\r\n    get weekDay(): number {\r\n        return this.getDay();\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.getMonth()\r\n     */\r\n    get month(): number {\r\n        return this.getMonth();\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.setMonth()\r\n     */\r\n    set month(value: number) {\r\n        this.setMonth(value);\r\n    }\r\n\r\n    /**\r\n     * Return two digit, human expected month. E.g. January = 1, December = 12\r\n     */\r\n    get monthFormatted(): string {\r\n        return this.month + 1 < 10 ? (`0${this.month}`) : `${this.month}`;\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.getFullYear()\r\n     */\r\n    get year(): number {\r\n        return this.getFullYear();\r\n    }\r\n\r\n    /**\r\n     * Shortcut to Date.setFullYear()\r\n     */\r\n    set year(value: number) {\r\n        this.setFullYear(value);\r\n    }\r\n}","import { DateTime, Unit } from './datetime';\r\n\r\ninterface Options {\r\n    restrictions: {\r\n        minDate: DateTime;\r\n        maxDate: DateTime;\r\n        enabledDates: DateTime[];\r\n        disabledDates: DateTime[];\r\n        enabledHours: number[];\r\n        disabledHours: number[];\r\n        disabledTimeIntervals: DateTime[];\r\n        daysOfWeekDisabled: number[];\r\n    };\r\n    display: {\r\n        toolbarPlacement: 'top' | 'bottom' | 'default';\r\n        widgetPositioning: { horizontal: string; vertical: string };\r\n        components: {\r\n            date: boolean;\r\n            century: boolean;\r\n            hours: boolean;\r\n            seconds: boolean;\r\n            month: boolean;\r\n            year: boolean;\r\n            minutes: boolean;\r\n            decades: boolean;\r\n            useTwentyfourHour: boolean;\r\n        };\r\n        buttons: { today: boolean; close: boolean; clear: boolean };\r\n        calendarWeeks: boolean;\r\n        icons: {\r\n            date: string;\r\n            next: string;\r\n            previous: string;\r\n            today: string;\r\n            clear: string;\r\n            time: string;\r\n            up: string;\r\n            type: 'icons' | 'sprites';\r\n            down: string;\r\n            close: string;\r\n        };\r\n        viewMode: 'times' | 'days';\r\n        collapse: boolean;\r\n        sideBySide: boolean;\r\n    };\r\n    stepping: number;\r\n    useCurrent: boolean;\r\n    defaultDate: boolean;\r\n    localization: {\r\n        nextMonth: string;\r\n        pickHour: string;\r\n        incrementSecond: string;\r\n        nextDecade: string;\r\n        selectDecade: string;\r\n        dayViewHeaderFormat: 'numeric' | '2-digit' | 'long' | 'short' | 'narrow';\r\n        decrementHour: string;\r\n        selectDate: string;\r\n        incrementHour: string;\r\n        previousCentury: string;\r\n        decrementSecond: string;\r\n        today: string;\r\n        previousMonth: string;\r\n        selectYear: string;\r\n        pickSecond: string;\r\n        nextCentury: string;\r\n        close: string;\r\n        incrementMinute: string;\r\n        selectTime: string;\r\n        clear: string;\r\n        togglePeriod: string;\r\n        selectMonth: string;\r\n        decrementMinute: string;\r\n        pickMinute: string;\r\n        nextYear: string;\r\n        previousYear: string;\r\n        previousDecade: string;\r\n    };\r\n    readonly: boolean;\r\n    ignoreReadonly: boolean;\r\n    keepOpen: boolean;\r\n    focusOnShow: boolean;\r\n    inline: boolean;\r\n    keepInvalid: boolean;\r\n    keyBinds: {\r\n        'control down': () => boolean;\r\n        pageDown: () => boolean;\r\n        'control up': () => boolean;\r\n        right: () => boolean;\r\n        pageUp: () => boolean;\r\n        down: () => boolean;\r\n        delete: () => boolean;\r\n        t: () => boolean;\r\n        left: () => boolean;\r\n        up: () => boolean;\r\n        enter: () => boolean;\r\n        'control space': () => boolean;\r\n        escape: () => boolean;\r\n    };\r\n    debug: boolean;\r\n    allowInputToggle: boolean;\r\n    viewDate: DateTime;\r\n    allowMultidate: boolean;\r\n    multidateSeparator: string;\r\n    promptTimeOnDateChange: boolean;\r\n    promptTimeOnDateChangeTransitionDelay: number;\r\n}\r\n\r\nconst DefaultOptions: Options = {\r\n    restrictions: {\r\n        minDate: undefined,\r\n        maxDate: undefined,\r\n        disabledDates: [],\r\n        enabledDates: [],\r\n        daysOfWeekDisabled: [],\r\n        disabledTimeIntervals: [],\r\n        disabledHours: [],\r\n        enabledHours: [],\r\n    },\r\n    display: {\r\n        icons: {\r\n            type: 'icons',\r\n            time: 'fas fa-clock',\r\n            date: 'fas fa-calendar',\r\n            up: 'fas fa-arrow-up',\r\n            down: 'fas fa-arrow-down',\r\n            previous: 'fas fa-chevron-left',\r\n            next: 'fas fa-chevron-right',\r\n            today: 'fas fa-calendar-check',\r\n            clear: 'fas fa-trash',\r\n            close: 'fas fa-times',\r\n        },\r\n        collapse: true,\r\n        sideBySide: false,\r\n        calendarWeeks: false,\r\n        viewMode: 'days',\r\n        toolbarPlacement: 'default',\r\n        buttons: {\r\n            today: false,\r\n            clear: false,\r\n            close: false,\r\n        },\r\n        widgetPositioning: {\r\n            horizontal: 'auto',\r\n            vertical: 'auto',\r\n        },\r\n        components: {\r\n            century: true,\r\n            decades: true,\r\n            year: true,\r\n            month: true,\r\n            date: true,\r\n            hours: true,\r\n            minutes: true,\r\n            seconds: false,\r\n            useTwentyfourHour: false,\r\n        },\r\n    },\r\n    stepping: 1,\r\n    useCurrent: true,\r\n    defaultDate: false,\r\n    localization: {\r\n        //todo plugin\r\n        today: 'Go to today',\r\n        clear: 'Clear selection',\r\n        close: 'Close the picker',\r\n        selectMonth: 'Select Month',\r\n        previousMonth: 'Previous Month',\r\n        nextMonth: 'Next Month',\r\n        selectYear: 'Select Year',\r\n        previousYear: 'Previous Year',\r\n        nextYear: 'Next Year',\r\n        selectDecade: 'Select Decade',\r\n        previousDecade: 'Previous Decade',\r\n        nextDecade: 'Next Decade',\r\n        previousCentury: 'Previous Century',\r\n        nextCentury: 'Next Century',\r\n        pickHour: 'Pick Hour',\r\n        incrementHour: 'Increment Hour',\r\n        decrementHour: 'Decrement Hour',\r\n        pickMinute: 'Pick Minute',\r\n        incrementMinute: 'Increment Minute',\r\n        decrementMinute: 'Decrement Minute',\r\n        pickSecond: 'Pick Second',\r\n        incrementSecond: 'Increment Second',\r\n        decrementSecond: 'Decrement Second',\r\n        togglePeriod: 'Toggle Period',\r\n        selectTime: 'Select Time',\r\n        selectDate: 'Select Date',\r\n        dayViewHeaderFormat: 'long',\r\n    },\r\n    readonly: false,\r\n    ignoreReadonly: false,\r\n    keepOpen: false,\r\n    focusOnShow: true,\r\n    inline: false,\r\n    keepInvalid: false,\r\n    keyBinds: {\r\n        //todo plugin //todo jquery //todo moment\r\n        up: function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            const d = this._dates[0] || this.getMoment();\r\n            if (this.widget.find('.datepicker').is(':visible')) {\r\n                this.date(d.clone().subtract(7, 'd'));\r\n            } else {\r\n                this.date(d.clone().add(this.stepping(), 'm'));\r\n            }\r\n            return true;\r\n        },\r\n        down: function () {\r\n            if (!this.widget) {\r\n                this.show();\r\n                return false;\r\n            }\r\n            const d = this._dates[0] || this.getMoment();\r\n            if (this.widget.find('.datepicker').is(':visible')) {\r\n                this.date(d.clone().add(7, 'd'));\r\n            } else {\r\n                this.date(d.clone().subtract(this.stepping(), 'm'));\r\n            }\r\n            return true;\r\n        },\r\n        'control up': function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            const d = this._dates[0] || this.getMoment();\r\n            if (this.widget.find('.datepicker').is(':visible')) {\r\n                this.date(d.clone().subtract(1, 'y'));\r\n            } else {\r\n                this.date(d.clone().add(1, 'h'));\r\n            }\r\n            return true;\r\n        },\r\n        'control down': function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            const d = this._dates[0] || this.getMoment();\r\n            if (this.widget.find('.datepicker').is(':visible')) {\r\n                this.date(d.clone().add(1, 'y'));\r\n            } else {\r\n                this.date(d.clone().subtract(1, 'h'));\r\n            }\r\n            return true;\r\n        },\r\n        left: function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            const d = this._dates[0] || this.getMoment();\r\n            if (this.widget.find('.datepicker').is(':visible')) {\r\n                this.date(d.clone().subtract(1, 'd'));\r\n            }\r\n            return true;\r\n        },\r\n        right: function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            const d = this._dates[0] || this.getMoment();\r\n            if (this.widget.find('.datepicker').is(':visible')) {\r\n                this.date(d.clone().add(1, 'd'));\r\n            }\r\n            return true;\r\n        },\r\n        pageUp: function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            const d = this._dates[0] || this.getMoment();\r\n            if (this.widget.find('.datepicker').is(':visible')) {\r\n                this.date(d.clone().subtract(1, 'M'));\r\n            }\r\n            return true;\r\n        },\r\n        pageDown: function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            const d = this._dates[0] || this.getMoment();\r\n            if (this.widget.find('.datepicker').is(':visible')) {\r\n                this.date(d.clone().add(1, 'M'));\r\n            }\r\n            return true;\r\n        },\r\n        enter: function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            this.hide();\r\n            return true;\r\n        },\r\n        escape: function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            this.hide();\r\n            return true;\r\n        },\r\n        'control space': function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            if (this.widget.find('.timepicker').is(':visible')) {\r\n                this.widget.find('.btn[data-action=\"togglePeriod\"]').click();\r\n            }\r\n            return true;\r\n        },\r\n        t: function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            this.date(this.getMoment());\r\n            return true;\r\n        },\r\n        delete: function () {\r\n            if (!this.widget) {\r\n                return false;\r\n            }\r\n            this.clear();\r\n            return true;\r\n        },\r\n    },\r\n    debug: false,\r\n    allowInputToggle: false,\r\n    viewDate: new DateTime(),\r\n    allowMultidate: false,\r\n    multidateSeparator: ', ',\r\n    promptTimeOnDateChange: false,\r\n    promptTimeOnDateChangeTransitionDelay: 200,\r\n};\r\n\r\n//this is not the way I want this to stay but nested classes seemed to blown up once its compiled.\r\nconst NAME = 'tempus-dominus';\r\nconst VERSION = '6.0.0-alpha1';\r\nconst DATA_KEY = 'td';\r\nconst DATA_API_KEY = '.data-api';\r\n\r\nclass Events {\r\n    KEY = `.${DATA_KEY}`;\r\n    CHANGE = `change${this.KEY}`;\r\n    UPDATE = `update${this.KEY}`;\r\n    ERROR = `error${this.KEY}`;\r\n    SHOW = `show${this.KEY}`;\r\n    HIDE = `hide${this.KEY}`;\r\n    BLUR = `blur${this.KEY}`;\r\n    KEYUP = `keyup${this.KEY}`;\r\n    KEYDOWN = `keydown${this.KEY}`;\r\n    FOCUS = `focus${this.KEY}`;\r\n    CLICK_DATA_API = `click${this.KEY}${DATA_API_KEY}`;\r\n    clickAction = `click${this.KEY}.action`;\r\n}\r\n\r\nclass Css {\r\n    widget = `${NAME}-widget`;\r\n    switch = 'picker-switch';\r\n    // todo the next several classes are to represent states of the picker that would\r\n    // make it wider then usual and it seems like this could be cleaned up.\r\n    widgetCalendarWeeks = `${this.widget}-with-calendar-weeks`;\r\n    useTwentyfour = 'useTwentyfour';\r\n    wider = 'wider';\r\n    sideBySide = 'timepicker-sbs';\r\n\r\n    previous = 'previous';\r\n    next = 'next';\r\n    disabled = 'disabled';\r\n    old = 'old';\r\n    new = 'new';\r\n    active = 'active';\r\n    separator = 'separator';\r\n    //#region date container\r\n    dateContainer = 'date-container';\r\n    decadesContainer = `${this.dateContainer}-decades`;\r\n    decade = 'decade';\r\n    yearsContainer = `${this.dateContainer}-years`;\r\n    year = 'year';\r\n    monthsContainer = `${this.dateContainer}-months`;\r\n    month = 'month';\r\n    daysContainer = `${this.dateContainer}-days`;\r\n    day = 'day';\r\n    calendarWeeks = 'cw';\r\n    dayOfTheWeek = 'dow';\r\n    today = 'today';\r\n    weekend = 'weekend';\r\n    //#endregion\r\n\r\n    //#region time container\r\n\r\n    timeContainer = 'time-container';\r\n    clockContainer = `${this.timeContainer}-clock`;\r\n    hourContainer = `${this.timeContainer}-hour`;\r\n    minuteContainer = `${this.timeContainer}-minute`;\r\n    secondContainer = `${this.timeContainer}-second`;\r\n\r\n    hour = 'hour';\r\n    minute = 'minute';\r\n    second = 'second';\r\n\r\n    //#endregion\r\n\r\n    //#region collapse\r\n\r\n    show = 'show';\r\n    collapsing = 'td-collapsing';\r\n    collapse = 'td-collapse';\r\n\r\n    //#endregion\r\n}\r\n\r\nclass ErrorMessages {\r\n    //#region out to console\r\n    unexpectedOption(optionName: string) {\r\n        return `TD: Unexpected option: ${optionName} does not match a known option.`;\r\n    }\r\n\r\n    typeMismatch(optionName: string, badType: string, expectedType: string) {\r\n        return `TD: Mismatch types: ${optionName} has a type of ${badType} instead of the required ${expectedType}`;\r\n    }\r\n\r\n    dateString = 'TD: Using a string for date options is not recommended unless you specify an ISO string.';\r\n\r\n    numbersOutOfRage(optionName: string, lower: number, upper: number) {\r\n        return `'TD: ${optionName} expected an array of number between ${lower} and ${upper}.'`\r\n    }\r\n\r\n    failedToParseDate(optionName: string, date: any) {\r\n        return `TD: Could not correctly parse \"${date}\" to a date for option ${optionName}.`\r\n    }\r\n\r\n    //#endregion\r\n\r\n    //#region used with notify.error\r\n    failedToSetInvalidDate = 'Failed to set invalid date';\r\n    //#endregion\r\n}\r\n\r\nclass Namespace {\r\n    static NAME = NAME;\r\n    static VERSION = VERSION;\r\n    static DATA_KEY = DATA_KEY;\r\n    static DATA_API_KEY = DATA_API_KEY;\r\n\r\n    static Events = new Events();\r\n\r\n    static Css = new Css();\r\n\r\n    static ErrorMessages = new ErrorMessages();\r\n}\r\n\r\nconst DatePickerModes = [\r\n    {\r\n        CLASS_NAME: Namespace.Css.daysContainer,\r\n        NAV_FUNCTION: Unit.month,\r\n        NAV_STEP: 1,\r\n    },\r\n    {\r\n        CLASS_NAME: Namespace.Css.monthsContainer,\r\n        NAV_FUNCTION: Unit.year,\r\n        NAV_STEP: 1,\r\n    },\r\n    {\r\n        CLASS_NAME: Namespace.Css.yearsContainer,\r\n        NAV_FUNCTION: Unit.year,\r\n        NAV_STEP: 10,\r\n    },\r\n    {\r\n        CLASS_NAME: Namespace.Css.decadesContainer,\r\n        NAV_FUNCTION: Unit.year,\r\n        NAV_STEP: 100,\r\n    },\r\n];\r\n\r\nexport { DefaultOptions, DatePickerModes, Namespace, Options };\r\n","import { Namespace } from \"../conts\";\r\n\r\nexport default class Collapse {\r\n    private timeOut;\r\n    toggle(target: HTMLElement) {\r\n        if (target.classList.contains(Namespace.Css.show)) {\r\n            this.hide(target);\r\n        } else {\r\n            this.show(target);\r\n        }\r\n    }\r\n\r\n    show(target: HTMLElement) {\r\n        if (\r\n            target.classList.contains(Namespace.Css.collapsing) ||\r\n            target.classList.contains(Namespace.Css.show)\r\n        )\r\n            return;\r\n\r\n        const complete = () => {\r\n            target.classList.remove(Namespace.Css.collapsing);\r\n            target.classList.add(Namespace.Css.collapse, Namespace.Css.show);\r\n            target.style.height = '';\r\n            this.timeOut = null;\r\n        };\r\n\r\n        target.style.height = '0';\r\n        target.classList.remove(Namespace.Css.collapse);\r\n        target.classList.add(Namespace.Css.collapsing);\r\n\r\n        this.timeOut = setTimeout(complete, this.getTransitionDurationFromElement(target));\r\n        target.style.height = `${target.scrollHeight}px`;\r\n    }\r\n\r\n    hide(target: HTMLElement) {\r\n        if (\r\n            target.classList.contains(Namespace.Css.collapsing) ||\r\n            !target.classList.contains(Namespace.Css.show)\r\n        )\r\n            return;\r\n\r\n        const complete = () => {\r\n            target.classList.remove(Namespace.Css.collapsing);\r\n            target.classList.add(Namespace.Css.collapse);\r\n            this.timeOut = null;\r\n        };\r\n\r\n        target.style.height = `${target.getBoundingClientRect()['height']}px`;\r\n\r\n        const reflow = element => element.offsetHeight;\r\n\r\n        reflow(target);\r\n\r\n        target.classList.remove(Namespace.Css.collapse, Namespace.Css.show);\r\n        target.classList.add(Namespace.Css.collapsing);\r\n        target.style.height = '';\r\n\r\n        this.timeOut = setTimeout(complete, this.getTransitionDurationFromElement(target));\r\n    }\r\n\r\n    private getTransitionDurationFromElement = element => {\r\n        if (!element) {\r\n            return 0;\r\n        }\r\n\r\n        // Get transition-duration of the element\r\n        let { transitionDuration, transitionDelay } = window.getComputedStyle(\r\n            element\r\n        );\r\n\r\n        const floatTransitionDuration = Number.parseFloat(transitionDuration);\r\n        const floatTransitionDelay = Number.parseFloat(transitionDelay);\r\n\r\n        // Return 0 if element or transition duration is not found\r\n        if (!floatTransitionDuration && !floatTransitionDelay) {\r\n            return 0;\r\n        }\r\n\r\n        // If multiple durations are defined, take the first\r\n        transitionDuration = transitionDuration.split(',')[0];\r\n        transitionDelay = transitionDelay.split(',')[0];\r\n\r\n        return (\r\n            (Number.parseFloat(transitionDuration) +\r\n                Number.parseFloat(transitionDelay)) *\r\n            1000\r\n        );\r\n    };\r\n}","import { DatePickerModes, Namespace } from './conts.js';\r\nimport { DateTime, Unit } from './datetime';\r\nimport { TempusDominus } from './tempus-dominus';\r\nimport Collapse from './display/collapse';\r\n\r\nexport default class Actions {\r\n    private context: TempusDominus;\r\n    private collapse: Collapse;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n        this.collapse = new Collapse();\r\n    }\r\n\r\n    do(e, action?) {\r\n        const currentTarget = e.currentTarget;\r\n        if (currentTarget.classList.contains(Namespace.Css.disabled)) return false;\r\n        action = action || currentTarget.dataset.action;\r\n        const lastPicked = (this.context.dates.lastPicked || this.context.viewDate).clone\r\n        console.log('action', action);\r\n\r\n        const modifyTime = (unit: Unit, value = 1) => {\r\n            const newDate = lastPicked.manipulate(value, unit);\r\n            if (this.context.validation.isValid(newDate, unit)) {\r\n                /*if (this.context.dates.lastPickedIndex < 0) {\r\n                    this.date(newDate);\r\n                }*/\r\n                this.context.dates._setValue(newDate, this.context.dates.lastPickedIndex);\r\n            }\r\n        }\r\n\r\n        switch (action) {\r\n            case ActionTypes.next:\r\n            case ActionTypes.previous:\r\n                const { NAV_FUNCTION, NAV_STEP } = DatePickerModes[this.context.currentViewMode];\r\n                if (action === ActionTypes.next)\r\n                    this.context.viewDate.manipulate(NAV_STEP, NAV_FUNCTION);\r\n                else\r\n                    this.context.viewDate.manipulate(NAV_STEP * -1, NAV_FUNCTION);\r\n                this.context.display.update('calendar');\r\n                this.context.viewUpdate(NAV_FUNCTION);\r\n                break;\r\n            case ActionTypes.pickerSwitch:\r\n                this.context.display._showMode(1);\r\n                break;\r\n            case ActionTypes.selectMonth:\r\n            case ActionTypes.selectYear:\r\n            case ActionTypes.selectDecade:\r\n                const value = +currentTarget.getAttribute('data-value');\r\n                switch (action) {\r\n                    case ActionTypes.selectMonth:\r\n                        this.context.viewDate.month = value;\r\n                        this.context.viewUpdate(Unit.month);\r\n                        break;\r\n                    case ActionTypes.selectYear:\r\n                        this.context.viewDate.year = value;\r\n                        this.context.viewUpdate(Unit.year);\r\n                        break;\r\n                    case ActionTypes.selectDecade:\r\n                        this.context.viewDate.year = value;\r\n                        this.context.viewUpdate(Unit.year);\r\n                        break;\r\n                }\r\n\r\n                if (this.context.currentViewMode === this.context.minViewModeNumber) {\r\n                    this.context.dates._setValue(this.context.viewDate, this.context.dates.lastPickedIndex);\r\n                    if (!this.context.options.inline) {\r\n                        this.context.display.hide();\r\n                    }\r\n                } else {\r\n                    this.context.display._showMode(-1);\r\n                }\r\n                break;\r\n            case ActionTypes.selectDay:\r\n                const day = this.context.viewDate.clone;\r\n                if (currentTarget.classList.contains(Namespace.Css.old)) {\r\n                    day.manipulate(-1, Unit.month);\r\n                }\r\n                if (currentTarget.classList.contains(Namespace.Css.new)) {\r\n                    day.manipulate(1, Unit.month);\r\n                }\r\n\r\n                day.date = +currentTarget.innerText;\r\n                let index = 0;\r\n                if (this.context.options.allowMultidate) {\r\n                    index = this.context.dates.pickedIndex(day, Unit.date);\r\n                    if (index !== -1) {\r\n                        this.context.dates._setValue(null, index); //deselect multidate\r\n                    } else {\r\n                        this.context.dates._setValue(day, this.context.dates.lastPickedIndex + 1);\r\n                    }\r\n                } else {\r\n                    this.context.dates._setValue(day, this.context.dates.lastPickedIndex);\r\n                }\r\n\r\n                if (!this.context.display._hasTime && !this.context.options.keepOpen &&\r\n                    !this.context.options.inline && !this.context.options.allowMultidate) {\r\n                    this.context.display.hide();\r\n                }\r\n                break;\r\n            case ActionTypes.selectHour:\r\n                let hour = +currentTarget.getAttribute('data-value');\r\n                lastPicked.hours = hour;\r\n                this.context.dates._setValue(lastPicked, this.context.dates.lastPickedIndex);\r\n                if (!this.context.options.display.components.useTwentyfourHour &&\r\n                    !this.context.options.display.components.minutes && !this.context.options.keepOpen && !this.context.options.inline) {\r\n                    this.context.display.hide();\r\n                } else {\r\n                    this.do(e, ActionTypes.showClock);\r\n                }\r\n                break;\r\n            case ActionTypes.selectMinute:\r\n                lastPicked.minutes = +currentTarget.innerText;\r\n                this.context.dates._setValue(lastPicked, this.context.dates.lastPickedIndex);\r\n                if (!this.context.options.display.components.useTwentyfourHour &&\r\n                    !this.context.options.display.components.seconds && !this.context.options.keepOpen && !this.context.options.inline) {\r\n                    this.context.display.hide();\r\n                } else {\r\n                    this.do(e, ActionTypes.showClock);\r\n                }\r\n                break;\r\n            case ActionTypes.selectSecond:\r\n                lastPicked.seconds = +currentTarget.innerText;\r\n                this.context.dates._setValue(lastPicked, this.context.dates.lastPickedIndex);\r\n                if (!this.context.options.display.components.useTwentyfourHour && !this.context.options.keepOpen &&\r\n                    !this.context.options.inline) {\r\n                    this.context.display.hide();\r\n                } else {\r\n                    this.do(e, ActionTypes.showClock);\r\n                }\r\n                break;\r\n            case ActionTypes.incrementHours:\r\n                modifyTime(Unit.hours);\r\n                break;\r\n            case ActionTypes.incrementMinutes:\r\n                modifyTime(Unit.minutes, this.context.options.stepping);\r\n                break;\r\n            case ActionTypes.incrementSeconds:\r\n                modifyTime(Unit.seconds);\r\n                break;\r\n            case ActionTypes.decrementHours:\r\n                modifyTime(Unit.hours, -1);\r\n                break;\r\n            case ActionTypes.decrementMinutes:\r\n                modifyTime(Unit.minutes, this.context.options.stepping * -1);\r\n                break;\r\n            case ActionTypes.decrementSeconds:\r\n                modifyTime(Unit.seconds, -1);\r\n                break;\r\n            case ActionTypes.togglePeriod:\r\n                modifyTime(Unit.hours, this.context.dates.lastPicked.hours >= 12 ? -12 : 12);\r\n                break;\r\n            case ActionTypes.togglePicker:\r\n                this.context.display.widget\r\n                    .querySelectorAll(`.${Namespace.Css.dateContainer}, .${Namespace.Css.timeContainer}`)\r\n                    .forEach((e: HTMLElement) => this.collapse.toggle(e));\r\n\r\n                if (currentTarget.getAttribute('title') === this.context.options.localization.selectDate) {\r\n                    currentTarget.setAttribute('title', this.context.options.localization.selectTime);\r\n                    currentTarget.innerHTML = this.context.display.iconTag(this.context.options.display.icons.time).outerHTML;\r\n                    this.context.display.update('calendar');\r\n                } else {\r\n                    currentTarget.setAttribute('title', this.context.options.localization.selectDate);\r\n                    currentTarget.innerHTML = this.context.display.iconTag(this.context.options.display.icons.date).outerHTML;\r\n                    this.do(e, ActionTypes.showClock);\r\n                    this.context.display.update('clock');\r\n                }\r\n                break;\r\n            case ActionTypes.showClock:\r\n            case ActionTypes.showHours:\r\n            case ActionTypes.showMinutes:\r\n            case ActionTypes.showSeconds:\r\n                this.context.display.widget.querySelectorAll(`.${Namespace.Css.timeContainer} > div`)\r\n                    .forEach((e: HTMLElement) => e.style.display = 'none');\r\n\r\n                let classToUse = '';\r\n                switch (action) {\r\n                    case ActionTypes.showClock:\r\n                        classToUse = Namespace.Css.clockContainer;\r\n                        this.context.display.update('clock');\r\n                        break;\r\n                    case ActionTypes.showHours:\r\n                        classToUse = Namespace.Css.hourContainer;\r\n                        this.context.display.update(Unit.hours);\r\n                        break;\r\n                    case ActionTypes.showMinutes:\r\n                        classToUse = Namespace.Css.minuteContainer;\r\n                        this.context.display.update(Unit.minutes);\r\n                        break;\r\n                    case ActionTypes.showSeconds:\r\n                        classToUse = Namespace.Css.secondContainer;\r\n                        this.context.display.update(Unit.seconds);\r\n                        break;\r\n                }\r\n\r\n                (<HTMLElement>this.context.display.widget.getElementsByClassName(classToUse)[0]).style.display = 'block';\r\n                break;\r\n            case ActionTypes.clear:\r\n                this.context.dates._setValue(null);\r\n                break;\r\n            case ActionTypes.close:\r\n                this.context.display.hide();\r\n                break;\r\n            case ActionTypes.today:\r\n                const today = new DateTime();\r\n                this.context.viewDate = today;\r\n                if (this.context.validation.isValid(today, Unit.date))\r\n                    this.context.dates._setValue(today, this.context.dates.lastPickedIndex);\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nexport enum ActionTypes {\r\n    next = 'next',\r\n    previous = 'previous',\r\n    pickerSwitch = 'pickerSwitch',\r\n    selectMonth = 'selectMonth',\r\n    selectYear = 'selectYear',\r\n    selectDecade = 'selectDecade',\r\n    selectDay = 'selectDay',\r\n    selectHour = 'selectHour',\r\n    selectMinute = 'selectMinute',\r\n    selectSecond = 'selectSecond',\r\n    incrementHours = 'incrementHours',\r\n    incrementMinutes = 'incrementMinutes',\r\n    incrementSeconds = 'incrementSeconds',\r\n    decrementHours = 'decrementHours',\r\n    decrementMinutes = 'decrementMinutes',\r\n    decrementSeconds = 'decrementSeconds',\r\n    togglePeriod = 'togglePeriod',\r\n    togglePicker = 'togglePicker',\r\n    showClock = 'showClock',\r\n    showHours = 'showHours',\r\n    showMinutes = 'showMinutes',\r\n    showSeconds = 'showSeconds',\r\n    clear = 'clear',\r\n    close = 'close',\r\n    today = 'today'\r\n}","import { TempusDominus } from '../../tempus-dominus';\r\nimport { DateTime, Unit } from '../../datetime';\r\nimport { ActionTypes } from '../../actions';\r\nimport { Namespace } from '../../conts';\r\n\r\nexport default class DateDisplay {\r\n    private context: TempusDominus;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n    }\r\n\r\n    get picker(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.classList.add(Namespace.Css.daysContainer);\r\n\r\n        const table = document.createElement('table');\r\n        table.classList.add('table', 'table-sm'); //todo bootstrap\r\n        const headTemplate = this.context.display.headTemplate;\r\n        const [previous, switcher, next] = headTemplate.getElementsByTagName('th');\r\n\r\n        previous.getElementsByTagName('div')[0].setAttribute('title', this.context.options.localization.previousMonth);\r\n        switcher.setAttribute('title', this.context.options.localization.selectMonth)\r\n        next.getElementsByTagName('div')[0].setAttribute('title', this.context.options.localization.nextMonth);\r\n\r\n        table.appendChild(headTemplate);\r\n        const tableBody = document.createElement('tbody');\r\n        tableBody.appendChild(this._daysOfTheWeek());\r\n        let row = document.createElement('tr');\r\n        if (this.context.options.display.calendarWeeks) {\r\n            const td = document.createElement('td')\r\n            const div = document.createElement('div');\r\n            div.classList.add(Namespace.Css.calendarWeeks); //todo this option needs to be watched and the grid rebuilt if changed\r\n            td.appendChild(div);\r\n            row.appendChild(td);\r\n        }\r\n        for (let i = 0; i <= 42; i++) {\r\n            if (i !== 0 && i % 7 === 0) {\r\n                tableBody.appendChild(row);\r\n                row = document.createElement('tr');\r\n\r\n                if (this.context.options.display.calendarWeeks) {\r\n                    const td = document.createElement('td');\r\n                    const div = document.createElement('div');\r\n                    div.classList.add(Namespace.Css.calendarWeeks); //todo this option needs to be watched and the grid rebuilt if changed\r\n                    td.appendChild(div);\r\n                    row.appendChild(td);\r\n                }\r\n            }\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.selectDay);\r\n            //td.setAttribute('data-action', ActionTypes.selectDay);\r\n            td.appendChild(div);\r\n            row.appendChild(td);\r\n        }\r\n\r\n        table.appendChild(tableBody);\r\n        container.appendChild(table);\r\n\r\n        return container;\r\n    }\r\n\r\n    update(): void {\r\n        const container = this.context.display.widget.getElementsByClassName(Namespace.Css.daysContainer)[0];\r\n        const [previous, switcher, next] = container.getElementsByTagName('thead')[0].getElementsByTagName('th');\r\n\r\n        switcher.innerText = this.context.viewDate.format({ month: this.context.options.localization.dayViewHeaderFormat });\r\n\r\n        this.context.validation.isValid(this.context.viewDate.clone.manipulate(-1, Unit.month), Unit.month) ?\r\n            previous.classList.remove(Namespace.Css.disabled) : previous.classList.add(Namespace.Css.disabled);\r\n\r\n        this.context.validation.isValid(this.context.viewDate.clone.manipulate(1, Unit.month), Unit.month) ?\r\n            next.classList.remove(Namespace.Css.disabled) : next.classList.add(Namespace.Css.disabled);\r\n\r\n        this.grid(container.querySelectorAll('tbody td div'));\r\n    }\r\n\r\n    private grid(nodeList: NodeList) {\r\n        let innerDate = this.context.viewDate.clone.startOf(Unit.month).startOf('weekDay').manipulate(12, Unit.hours);\r\n\r\n        nodeList.forEach((containerClone: HTMLElement, index) => {\r\n            if (this.context.options.display.calendarWeeks && containerClone.classList.contains(Namespace.Css.calendarWeeks)) {\r\n                containerClone.innerText = `${innerDate.week}`;\r\n                return;\r\n            }\r\n\r\n            let classes = [];\r\n            classes.push(Namespace.Css.day);\r\n\r\n            if (innerDate.isBefore(this.context.viewDate, Unit.month)) {\r\n                classes.push(Namespace.Css.old);\r\n            }\r\n            if (innerDate.isAfter(this.context.viewDate, Unit.month)) {\r\n                classes.push(Namespace.Css.new);\r\n            }\r\n\r\n            if (!this.context.unset && this.context.dates.isPicked(innerDate, Unit.date)) {\r\n                classes.push(Namespace.Css.active);\r\n            }\r\n            if (!this.context.validation.isValid(innerDate, Unit.date)) {\r\n                classes.push(Namespace.Css.disabled);\r\n            }\r\n            if (innerDate.isSame(new DateTime(), Unit.date)) {\r\n                classes.push(Namespace.Css.today);\r\n            }\r\n            if (innerDate.weekDay === 0 || innerDate.weekDay === 6) {\r\n                classes.push(Namespace.Css.weekend);\r\n            }\r\n\r\n            containerClone.classList.remove(...containerClone.classList);\r\n            containerClone.classList.add(...classes);\r\n            containerClone.setAttribute('data-value', `${innerDate.year}-${innerDate.monthFormatted}-${innerDate.dateFormatted}`);\r\n            containerClone.innerText = `${innerDate.date}`;\r\n            innerDate.manipulate(1, Unit.date);\r\n        });\r\n    }\r\n\r\n    /***\r\n     * Generates an html row that contains the days of the week.\r\n     */\r\n    _daysOfTheWeek(): HTMLTableRowElement {\r\n        let innerDate = this.context.viewDate.clone.startOf('weekDay').startOf(Unit.date);\r\n        const row = document.createElement('tr');\r\n\r\n        if (this.context.options.display.calendarWeeks) {\r\n            const th = document.createElement('th')\r\n            th.classList.add(Namespace.Css.calendarWeeks);\r\n            th.innerText = '#';\r\n            row.appendChild(th);\r\n        }\r\n\r\n        let i = 0;\r\n        while (i < 7) {\r\n            const th = document.createElement('th')\r\n            th.classList.add(Namespace.Css.dayOfTheWeek);\r\n            th.innerText = innerDate.format({ weekday: 'short' });\r\n            innerDate.manipulate(1, Unit.date);\r\n            row.appendChild(th);\r\n            i++;\r\n        }\r\n\r\n        return row;\r\n    }\r\n}","import { TempusDominus } from '../../tempus-dominus';\r\nimport { Unit } from '../../datetime';\r\nimport { Namespace } from '../../conts';\r\nimport { ActionTypes } from '../../actions';\r\n\r\nexport default class MonthDisplay {\r\n    private context: TempusDominus;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n    }\r\n\r\n    get picker(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.classList.add(Namespace.Css.monthsContainer);\r\n\r\n        const table = document.createElement('table');\r\n        table.classList.add('table', 'table-sm'); //todo bootstrap\r\n        const headTemplate = this.context.display.headTemplate;\r\n        const [previous, switcher, next] = headTemplate.getElementsByTagName('th');\r\n\r\n        previous.getElementsByTagName('div')[0].setAttribute('title', this.context.options.localization.previousYear);\r\n        switcher.setAttribute('title', this.context.options.localization.selectYear);\r\n        switcher.setAttribute('colspan', '1');\r\n        next.getElementsByTagName('div')[0].setAttribute('title', this.context.options.localization.nextYear);\r\n\r\n        table.appendChild(headTemplate);\r\n        const tableBody = document.createElement('tbody');\r\n        let row = document.createElement('tr');\r\n        for (let i = 0; i <= 12; i++) {\r\n            if (i !== 0 && i % 3 === 0) {\r\n                tableBody.appendChild(row);\r\n                row = document.createElement('tr');\r\n            }\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.selectMonth);\r\n            td.appendChild(div);\r\n            row.appendChild(td);\r\n        }\r\n\r\n        table.appendChild(tableBody);\r\n        container.appendChild(table);\r\n\r\n        return container;\r\n    }\r\n\r\n    update(): void {\r\n        const container = this.context.display.widget.getElementsByClassName(Namespace.Css.monthsContainer)[0];\r\n        const [previous, switcher, next] = container.getElementsByTagName('thead')[0].getElementsByTagName('th');\r\n\r\n        switcher.innerText = this.context.viewDate.format({ year: 'numeric' });\r\n\r\n        this.context.validation.isValid(this.context.viewDate.clone.manipulate(-1, Unit.year), Unit.year) ?\r\n            previous.classList.remove(Namespace.Css.disabled) : previous.classList.add(Namespace.Css.disabled);\r\n\r\n        this.context.validation.isValid(this.context.viewDate.clone.manipulate(1, Unit.year), Unit.year) ?\r\n            next.classList.remove(Namespace.Css.disabled) : next.classList.add(Namespace.Css.disabled);\r\n\r\n        this.grid(container.querySelectorAll('tbody td div'));\r\n    }\r\n\r\n    private grid(nodeList: NodeList) {\r\n        let innerDate = this.context.viewDate.clone.startOf(Unit.year)\r\n\r\n        nodeList.forEach((containerClone: HTMLElement, index) => {\r\n            let classes = [];\r\n            classes.push(Namespace.Css.month);\r\n\r\n            if (!this.context.unset && this.context.dates.isPicked(innerDate, Unit.month)) {\r\n                classes.push(Namespace.Css.active);\r\n            }\r\n            if (!this.context.validation.isValid(innerDate, Unit.month)) {\r\n                classes.push(Namespace.Css.disabled);\r\n            }\r\n\r\n            containerClone.classList.remove(...containerClone.classList);\r\n            containerClone.classList.add(...classes);\r\n            containerClone.setAttribute('data-value', `${index}`);\r\n            containerClone.innerText = `${innerDate.format({ month: 'long' })}`;\r\n            innerDate.manipulate(1, Unit.month);\r\n        });\r\n    }\r\n}","import { TempusDominus } from '../../tempus-dominus';\r\nimport { DateTime, Unit } from '../../datetime';\r\nimport { Namespace } from '../../conts';\r\nimport { ActionTypes } from '../../actions';\r\n\r\nexport default class YearDisplay {\r\n    private context: TempusDominus;\r\n    private _startYear: DateTime;\r\n    private _endYear: DateTime;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n        this._startYear = this.context.viewDate.clone.manipulate(-1, Unit.year);\r\n        this._endYear = this.context.viewDate.clone.manipulate(10, Unit.year);\r\n    }\r\n\r\n    get picker(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.classList.add(Namespace.Css.yearsContainer);\r\n\r\n        const table = document.createElement('table');\r\n        table.classList.add('table', 'table-sm'); //todo bootstrap\r\n        const headTemplate = this.context.display.headTemplate;\r\n        const [previous, switcher, next] = headTemplate.getElementsByTagName('th');\r\n\r\n        previous.getElementsByTagName('div')[0].setAttribute('title', this.context.options.localization.previousDecade);\r\n        switcher.setAttribute('title', this.context.options.localization.selectDecade);\r\n        switcher.setAttribute('colspan', '1');\r\n        next.getElementsByTagName('div')[0].setAttribute('title', this.context.options.localization.nextDecade);\r\n\r\n        table.appendChild(headTemplate);\r\n\r\n        const tableBody = document.createElement('tbody');\r\n        let row = document.createElement('tr');\r\n        for (let i = 0; i <= 12; i++) {\r\n            if (i !== 0 && i % 3 === 0) {\r\n                tableBody.appendChild(row);\r\n                row = document.createElement('tr');\r\n            }\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.selectYear);\r\n            td.appendChild(div);\r\n            row.appendChild(td);\r\n        }\r\n\r\n        table.appendChild(tableBody);\r\n        container.appendChild(table);\r\n\r\n        return container;\r\n    }\r\n\r\n    update() {\r\n        const container = this.context.display.widget.getElementsByClassName(Namespace.Css.yearsContainer)[0];\r\n        const [previous, switcher, next] = container.getElementsByTagName('thead')[0].getElementsByTagName('th');\r\n\r\n        switcher.innerText = `${this._startYear.year}-${this._endYear.year}`;\r\n\r\n        this.context.validation.isValid(this._startYear, Unit.year) ? previous.classList.remove(Namespace.Css.disabled) : previous.classList.add(Namespace.Css.disabled);\r\n        this.context.validation.isValid(this._endYear, Unit.year) ? next.classList.remove(Namespace.Css.disabled) : next.classList.add(Namespace.Css.disabled);\r\n\r\n        this.grid(container.querySelectorAll('tbody td div'));\r\n    }\r\n\r\n    private grid(nodeList: NodeList) {\r\n        let innerDate = this.context.viewDate.clone.startOf(Unit.year).manipulate(-1, Unit.year)\r\n\r\n        nodeList.forEach((containerClone: HTMLElement, index) => {\r\n            let classes = [];\r\n            classes.push(Namespace.Css.year);\r\n\r\n            if (!this.context.unset && this.context.dates.isPicked(innerDate, Unit.year)) {\r\n                classes.push(Namespace.Css.active);\r\n            }\r\n            if (!this.context.validation.isValid(innerDate, Unit.year)) {\r\n                classes.push(Namespace.Css.disabled);\r\n            }\r\n\r\n            containerClone.classList.remove(...containerClone.classList);\r\n            containerClone.classList.add(...classes);\r\n            containerClone.innerText = `${innerDate.year}`;\r\n\r\n            innerDate.manipulate(1, Unit.year);\r\n        });\r\n    }\r\n}","import { Namespace } from './conts.js';\r\nimport { TempusDominus } from './tempus-dominus';\r\nimport { DateTime, Unit } from './datetime';\r\n\r\n\r\n\r\nexport default class Dates {\r\n\r\n    _dates: DateTime[] = [];\r\n\r\n    private context: TempusDominus;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n    }\r\n\r\n\r\n    get picked(): DateTime[] {\r\n        return this._dates;\r\n    }\r\n\r\n    get lastPicked(): DateTime {\r\n        return this._dates[this.lastPickedIndex];\r\n    }\r\n\r\n    get lastPickedIndex(): number {\r\n        if (this._dates.length === 0) return 0;\r\n        return this._dates.length - 1;\r\n    }\r\n\r\n    add(date: DateTime): void {\r\n        this._dates.push(date);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param innerDate\r\n     * @param unit\r\n     */\r\n    isPicked(innerDate: DateTime, unit?: Unit): boolean {\r\n        if (!unit)\r\n            return this._dates.find(x => x === innerDate) !== undefined;\r\n\r\n        const format = Dates.getFormatByUnit(unit);\r\n\r\n        let innerDateFormatted = innerDate.format(format);\r\n\r\n        return this._dates.map(x => x.format(format)).find(x => x === innerDateFormatted) !== undefined;\r\n    }\r\n\r\n    pickedIndex(innerDate: DateTime, unit?: Unit): number {\r\n        if (!unit)\r\n            return this._dates.indexOf(innerDate);\r\n\r\n        const format = Dates.getFormatByUnit(unit);\r\n\r\n        let innerDateFormatted = innerDate.format(format);\r\n\r\n        return this._dates.map(x => x.format(format)).indexOf(innerDateFormatted);\r\n    }\r\n\r\n    static getStartEndYear(factor: number, year: number): [number, number, number] {\r\n        const step = factor / 10,\r\n            startYear = Math.floor(year / factor) * factor,\r\n            endYear = startYear + step * 9,\r\n            focusValue = Math.floor(year / step) * step;\r\n        return [startYear, endYear, focusValue];\r\n    }\r\n\r\n    _setValue(target: DateTime | undefined, index?: number): void {\r\n        const noIndex = (typeof index === 'undefined'),\r\n            isClear = !target && noIndex;\r\n        let oldDate = this.context.unset ? null : this._dates[index];\r\n        if (!oldDate && !this.context.unset && noIndex && isClear) {\r\n            oldDate = this.lastPicked;\r\n        }\r\n\r\n        // case of calling setValue(null or false)\r\n        if (!target) {\r\n            if (!this.context.options.allowMultidate || this._dates.length === 1 || isClear) {\r\n                this.context.unset = true;\r\n                this._dates = [];\r\n            } else {\r\n                this._dates.splice(index, 1);\r\n            }\r\n            this.context.notifyEvent(Namespace.Events.CHANGE, {\r\n                date: undefined,\r\n                oldDate,\r\n                isClear,\r\n                isValid: true,\r\n            });\r\n\r\n            this.context.display.update('all');\r\n            return;\r\n        }\r\n\r\n        index = 0;\r\n        target = target.clone;\r\n\r\n        if (this.context.options.stepping !== 1) {\r\n            target.minutes = Math.round(target.minutes / this.context.options.stepping) * this.context.options.stepping;\r\n            target.seconds = 0;\r\n        }\r\n\r\n        if (this.context.validation.isValid(target)) {\r\n            this._dates[index] = target;\r\n            this.context.viewDate = target.clone;\r\n\r\n            //TODO: format to the proper string\r\n            if (this.context.input && this.context.input.value != target.toString()) {\r\n                this.context.input.value = this.context.viewDate.formatWithOptions(this.context.options);\r\n            }\r\n\r\n            this.context.unset = false;\r\n            this.context.display.update('all');\r\n            this.context.notifyEvent(Namespace.Events.CHANGE, {\r\n                date: target,\r\n                oldDate,\r\n                isClear,\r\n                isValid: true,\r\n            });\r\n            //todo remove this\r\n            console.log(JSON.stringify(this._dates.map(d => d.format({ dateStyle: 'full', timeStyle: 'long' })), null, 2)); //todo remove\r\n            return;\r\n        }\r\n\r\n        if (this.context.options.keepInvalid) {\r\n            this._dates[index] = target;\r\n            this.context.viewDate = target.clone\r\n            this.context.notifyEvent(Namespace.Events.CHANGE,{\r\n                date: target,\r\n                oldDate,\r\n                isClear,\r\n                isValid: false,\r\n            });\r\n        }\r\n        this.context.notifyEvent(Namespace.Events.ERROR, {\r\n            reason: Namespace.ErrorMessages.failedToSetInvalidDate,\r\n            date: target,\r\n            oldDate\r\n        });\r\n    }\r\n\r\n    static getFormatByUnit(unit: Unit): object {\r\n        switch (unit) {\r\n            case 'date':\r\n                return { dateStyle: 'short' };\r\n            case 'month':\r\n                return {\r\n                    month: 'numeric',\r\n                    year: 'numeric'\r\n                };\r\n            case 'year':\r\n                return { year: 'numeric' };\r\n        }\r\n    }\r\n}","import { TempusDominus } from '../../tempus-dominus';\r\nimport Dates from '../../dates';\r\nimport { DateTime, Unit } from '../../datetime';\r\nimport { Namespace } from '../../conts';\r\nimport { ActionTypes } from '../../actions';\r\n\r\nexport default class DecadeDisplay {\r\n    private context: TempusDominus;\r\n    private _startDecade: DateTime;\r\n    private _endDecade: DateTime;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n    }\r\n\r\n    get picker() {\r\n        const container = document.createElement('div');\r\n        container.classList.add(Namespace.Css.decadesContainer);\r\n\r\n        const table = document.createElement('table');\r\n        table.classList.add('table', 'table-sm'); //todo bootstrap\r\n        const headTemplate = this.context.display.headTemplate;\r\n        const [previous, switcher, next] = headTemplate.getElementsByTagName('th');\r\n\r\n        previous.getElementsByTagName('div')[0].setAttribute('title', this.context.options.localization.previousCentury);\r\n        switcher.setAttribute('title', '');\r\n        switcher.removeAttribute('data-action');\r\n        switcher.setAttribute('colspan', '1');\r\n        next.getElementsByTagName('div')[0].setAttribute('title', this.context.options.localization.nextCentury);\r\n\r\n        table.appendChild(headTemplate);\r\n\r\n        const tableBody = document.createElement('tbody');\r\n        let row = document.createElement('tr');\r\n        for (let i = 0; i <= 12; i++) {\r\n            if (i !== 0 && i % 3 === 0) {\r\n                tableBody.appendChild(row);\r\n                row = document.createElement('tr');\r\n            }\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.selectDecade);\r\n            td.appendChild(div);\r\n            row.appendChild(td);\r\n        }\r\n\r\n        table.appendChild(tableBody);\r\n        container.appendChild(table);\r\n        return container;\r\n    }\r\n\r\n    update() {\r\n        const [start, end] = Dates.getStartEndYear(100, this.context.viewDate.year);\r\n        this._startDecade = this.context.viewDate.clone.startOf(Unit.year);\r\n        this._startDecade.year = start;\r\n        this._endDecade = this.context.viewDate.clone.startOf(Unit.year);\r\n        this._endDecade.year = end;\r\n\r\n        const container = this.context.display.widget.getElementsByClassName(Namespace.Css.decadesContainer)[0];\r\n        const [previous, switcher, next] = container.getElementsByTagName('thead')[0].getElementsByTagName('th');\r\n\r\n        switcher.innerText = `${this._startDecade.year}-${this._endDecade.year}`;\r\n\r\n\r\n        this.context.validation.isValid(this._startDecade, Unit.year) ? previous.classList.remove(Namespace.Css.disabled) : previous.classList.add(Namespace.Css.disabled);\r\n        this.context.validation.isValid(this._endDecade, Unit.year) ? next.classList.remove(Namespace.Css.disabled) : next.classList.add(Namespace.Css.disabled);\r\n\r\n        this.grid(container.querySelectorAll('tbody td div'));\r\n    }\r\n\r\n    private grid(nodeList: NodeList) {\r\n        const pickedYears = this.context.dates.picked.map(x => x.year);\r\n\r\n        nodeList.forEach((containerClone: HTMLElement, index) => {\r\n            if (index === 0) {\r\n                containerClone.classList.add(Namespace.Css.old);\r\n                if (this._startDecade.year - 10 < 0) {\r\n                    containerClone.innerText = '&nbsp;';\r\n                    return;\r\n                } else {\r\n                    containerClone.innerText = `${this._startDecade.year - 10}`;\r\n                    containerClone.setAttribute('data-value', `${this._startDecade.year + 6}`);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            let classes = [];\r\n            classes.push(Namespace.Css.decade);\r\n            const startDecadeYear = this._startDecade.year;\r\n            const endDecadeYear = this._startDecade.year + 9;\r\n\r\n            if (!this.context.unset && pickedYears.filter(x => x >= startDecadeYear && x <= endDecadeYear).length > 0) {\r\n                classes.push(Namespace.Css.active);\r\n            }\r\n            /* if (!this.context.validation.isValid(innerDate, 'y')) { //todo between\r\n                 classes.push('disabled');\r\n             }*/\r\n\r\n            containerClone.classList.remove(...containerClone.classList);\r\n            containerClone.classList.add(...classes);\r\n            containerClone.setAttribute('data-value', `${this._startDecade.year + 6}`);\r\n            containerClone.innerText = `${this._startDecade.year}`;\r\n\r\n            if (nodeList.length === index + 1) {\r\n                containerClone.classList.add(Namespace.Css.old);\r\n            }\r\n\r\n            this._startDecade.manipulate(10, Unit.year);\r\n        });\r\n    }\r\n}","import { TempusDominus } from '../../tempus-dominus';\r\nimport { Unit } from '../../datetime';\r\nimport { Namespace } from '../../conts';\r\nimport { ActionTypes } from '../../actions';\r\n\r\nexport default class TimeDisplay {\r\n    private context: TempusDominus;\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n    }\r\n\r\n    get picker(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.classList.add(Namespace.Css.clockContainer);\r\n\r\n        const table = document.createElement('table');\r\n        const tableBody = document.createElement('tbody');\r\n        this._grid().forEach(row => tableBody.appendChild(row));\r\n        table.appendChild(tableBody);\r\n        container.appendChild(table);\r\n\r\n        return container;\r\n    }\r\n\r\n    update(): void {\r\n        const timesDiv = this.context.display.widget.getElementsByClassName(Namespace.Css.timeContainer)[0];\r\n        const lastPicked = (this.context.dates.lastPicked || this.context.viewDate).clone;\r\n\r\n        if (!this.context.options.display.components.useTwentyfourHour) {\r\n            const toggle = timesDiv.querySelector<HTMLElement>(`[data-action=${ActionTypes.togglePeriod}]`);\r\n\r\n            toggle.innerText = lastPicked.meridiem();\r\n\r\n            if (!this.context.validation.isValid(lastPicked.clone.manipulate(lastPicked.hours >= 12 ? -12 : 12, Unit.hours))) {\r\n                toggle.classList.add(Namespace.Css.disabled);\r\n            }\r\n            else {\r\n                toggle.classList.remove(Namespace.Css.disabled);\r\n            }\r\n        }\r\n\r\n        timesDiv.querySelectorAll('.disabled').forEach(element => element.classList.remove(Namespace.Css.disabled));\r\n        if (this.context.options.display.components.hours) {\r\n\r\n            if (!this.context.validation.isValid(this.context.viewDate.clone.manipulate(1, Unit.hours), Unit.hours)) {\r\n                timesDiv.querySelector(`[data-action=${ActionTypes.incrementHours}]`).classList.add(Namespace.Css.disabled);\r\n            }\r\n            if (!this.context.validation.isValid(this.context.viewDate.clone.manipulate(-1, Unit.hours), Unit.hours)) {\r\n                timesDiv.querySelector(`[data-action=${ActionTypes.decrementHours}]`).classList.add(Namespace.Css.disabled);\r\n            }\r\n            timesDiv.querySelector<HTMLElement>(`[data-time-component=${Unit.hours}]`).innerText =\r\n                this.context.options.display.components.useTwentyfourHour ? lastPicked.hoursFormatted : lastPicked.twelveHoursFormatted;\r\n        }\r\n        if (this.context.options.display.components.minutes) {\r\n            if (!this.context.validation.isValid(this.context.viewDate.clone.manipulate(1, Unit.minutes), Unit.minutes)) {\r\n                timesDiv.querySelector(`[data-action=${ActionTypes.incrementMinutes}]`).classList.add(Namespace.Css.disabled);\r\n            }\r\n            if (!this.context.validation.isValid(this.context.viewDate.clone.manipulate(-1, Unit.minutes), Unit.minutes)) {\r\n                timesDiv.querySelector(`[data-action=${ActionTypes.decrementMinutes}]`).classList.add(Namespace.Css.disabled);\r\n            }\r\n            timesDiv.querySelector<HTMLElement>(`[data-time-component=${Unit.minutes}]`).innerText = lastPicked.minutesFormatted;\r\n        }\r\n        if (this.context.options.display.components.seconds) {\r\n            if (!this.context.validation.isValid(this.context.viewDate.clone.manipulate(1, Unit.seconds), Unit.seconds)) {\r\n                timesDiv.querySelector(`[data-action=${ActionTypes.incrementSeconds}]`).classList.add(Namespace.Css.disabled);\r\n            }\r\n            if (!this.context.validation.isValid(this.context.viewDate.clone.manipulate(-1, Unit.seconds), Unit.seconds)) {\r\n                timesDiv.querySelector(`[data-action=${ActionTypes.decrementSeconds}]`).classList.add(Namespace.Css.disabled);\r\n            }\r\n            timesDiv.querySelector<HTMLElement>(`[data-time-component=${Unit.seconds}]`).innerText = lastPicked.secondsFormatted;\r\n        }\r\n    }\r\n\r\n    _grid(): HTMLElement[] {\r\n        const rows = [],\r\n            separator = document.createElement('td'), separatorColon = <HTMLElement>separator.cloneNode(true),\r\n            topRow = document.createElement('tr'), middleRow = document.createElement('tr'),\r\n            bottomRow = document.createElement('tr'),\r\n            upIcon = this.context.display.iconTag(this.context.options.display.icons.up),\r\n            downIcon = this.context.display.iconTag(this.context.options.display.icons.down),\r\n            actionDiv = document.createElement('div');\r\n\r\n        separator.classList.add(Namespace.Css.separator);\r\n        separatorColon.innerHTML = ':';\r\n        actionDiv.classList.add('btn'); //todo bootstrap\r\n\r\n        if (this.context.options.display.components.hours) {\r\n            let td = document.createElement('td');\r\n            let actionLinkClone = <HTMLElement>actionDiv.cloneNode(true);\r\n            actionLinkClone.setAttribute('title', this.context.options.localization.incrementHour);\r\n            actionLinkClone.setAttribute('data-action', ActionTypes.incrementHours)\r\n            actionLinkClone.appendChild(upIcon.cloneNode(true));\r\n            td.appendChild(actionLinkClone);\r\n            topRow.appendChild(td);\r\n\r\n            td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('title', this.context.options.localization.pickHour);\r\n            div.setAttribute('data-action', ActionTypes.showHours)\r\n            div.setAttribute('data-time-component', Unit.hours)\r\n            td.appendChild(div);\r\n            middleRow.appendChild(td);\r\n\r\n            td = document.createElement('td');\r\n            actionLinkClone = <HTMLElement>actionDiv.cloneNode(true);\r\n            actionLinkClone.setAttribute('title', this.context.options.localization.decrementHour);\r\n            actionLinkClone.setAttribute('data-action', ActionTypes.decrementHours)\r\n            actionLinkClone.appendChild(downIcon.cloneNode(true));\r\n            td.appendChild(actionLinkClone);\r\n            bottomRow.appendChild(td);\r\n        }\r\n        if (this.context.options.display.components.minutes) {\r\n            if (this.context.options.display.components.hours) {\r\n                topRow.appendChild(separator.cloneNode(true));\r\n                middleRow.appendChild(separatorColon.cloneNode(true));\r\n                bottomRow.appendChild(separator.cloneNode(true));\r\n            }\r\n\r\n            let td = document.createElement('td');\r\n            let actionLinkClone = <HTMLElement>actionDiv.cloneNode(true);\r\n            actionLinkClone.setAttribute('title', this.context.options.localization.incrementMinute);\r\n            actionLinkClone.setAttribute('data-action', ActionTypes.incrementMinutes)\r\n            actionLinkClone.appendChild(upIcon.cloneNode(true));\r\n            td.appendChild(actionLinkClone);\r\n            topRow.appendChild(td);\r\n\r\n            td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('title', this.context.options.localization.pickMinute);\r\n            div.setAttribute('data-action', ActionTypes.showMinutes)\r\n            div.setAttribute('data-time-component', Unit.minutes)\r\n            td.appendChild(div);\r\n            middleRow.appendChild(td);\r\n\r\n            td = document.createElement('td');\r\n            actionLinkClone = <HTMLElement>actionDiv.cloneNode(true);\r\n            actionLinkClone.setAttribute('title', this.context.options.localization.decrementMinute);\r\n            actionLinkClone.setAttribute('data-action', ActionTypes.decrementMinutes)\r\n            actionLinkClone.appendChild(downIcon.cloneNode(true));\r\n            td.appendChild(actionLinkClone);\r\n            bottomRow.appendChild(td);\r\n        }\r\n        if (this.context.options.display.components.seconds) {\r\n            if (this.context.options.display.components.minutes) {\r\n                topRow.appendChild(separator.cloneNode(true));\r\n                middleRow.appendChild(separatorColon.cloneNode(true));\r\n                bottomRow.appendChild(separator.cloneNode(true));\r\n            }\r\n\r\n            let td = document.createElement('td');\r\n            let actionLinkClone = <HTMLElement>actionDiv.cloneNode(true);\r\n            actionLinkClone.setAttribute('title', this.context.options.localization.incrementSecond);\r\n            actionLinkClone.setAttribute('data-action', ActionTypes.incrementSeconds)\r\n            actionLinkClone.appendChild(upIcon.cloneNode(true));\r\n            td.appendChild(actionLinkClone);\r\n            topRow.appendChild(td);\r\n\r\n            td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('title', this.context.options.localization.pickSecond);\r\n            div.setAttribute('data-action', ActionTypes.showSeconds)\r\n            div.setAttribute('data-time-component', Unit.seconds)\r\n            td.appendChild(div);\r\n            middleRow.appendChild(td);\r\n\r\n            td = document.createElement('td');\r\n            actionLinkClone = <HTMLElement>actionDiv.cloneNode(true);\r\n            actionLinkClone.setAttribute('title', this.context.options.localization.decrementSecond);\r\n            actionLinkClone.setAttribute('data-action', ActionTypes.decrementSeconds)\r\n            actionLinkClone.appendChild(downIcon.cloneNode(true));\r\n            td.appendChild(actionLinkClone);\r\n            bottomRow.appendChild(td);\r\n        }\r\n\r\n        if (!this.context.options.display.components.useTwentyfourHour) {\r\n            topRow.appendChild(separator.cloneNode(true));\r\n\r\n            let td = document.createElement('td');\r\n            let button = document.createElement('button');\r\n            button.classList.add('btn', 'btn-primary'); //todo bootstrap\r\n            button.setAttribute('title', this.context.options.localization.togglePeriod);\r\n            button.setAttribute('data-action', ActionTypes.togglePeriod);\r\n            button.setAttribute('tabindex', '-1');\r\n            td.appendChild(button);\r\n            middleRow.appendChild(td);\r\n\r\n            bottomRow.appendChild(separator.cloneNode(true));\r\n        }\r\n\r\n        rows.push(topRow, middleRow, bottomRow);\r\n\r\n        return rows;\r\n    }\r\n}","import { TempusDominus } from '../../tempus-dominus';\r\nimport { Unit } from '../../datetime';\r\nimport { Namespace } from '../../conts';\r\nimport { ActionTypes } from '../../actions';\r\n\r\nexport default class HourDisplay {\r\n    private context: TempusDominus;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n    }\r\n\r\n    get picker(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.classList.add(Namespace.Css.hourContainer);\r\n\r\n        const table = document.createElement('table');\r\n        table.classList.add('table', 'table-sm'); //todo bootstrap\r\n        const tableBody = document.createElement('tbody');\r\n        let row = document.createElement('tr');\r\n        for (let i = 0; i <= (this.context.options.display.components.useTwentyfourHour ? 24 : 12); i++) {\r\n            if (i !== 0 && i % 4 === 0) {\r\n                tableBody.appendChild(row);\r\n                row = document.createElement('tr');\r\n            }\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.selectHour);\r\n            td.appendChild(div);\r\n            row.appendChild(td);\r\n        }\r\n\r\n        table.appendChild(tableBody);\r\n        container.appendChild(table);\r\n\r\n        return container;\r\n    }\r\n\r\n    update(): void {\r\n        const container = this.context.display.widget.getElementsByClassName(Namespace.Css.hourContainer)[0];\r\n        let innerDate = this.context.viewDate.clone.startOf(Unit.date);\r\n\r\n        container.querySelectorAll('tbody td div').forEach((containerClone: HTMLElement, index) => {\r\n            let classes = [];\r\n            classes.push(Namespace.Css.hour);\r\n\r\n            if (!this.context.validation.isValid(innerDate, Unit.hours)) {\r\n                classes.push(Namespace.Css.disabled);\r\n            }\r\n\r\n            containerClone.classList.remove(...containerClone.classList);\r\n            containerClone.classList.add(...classes);\r\n            containerClone.setAttribute('data-value', `${innerDate.hours}`);\r\n            containerClone.innerText = this.context.options.display.components.useTwentyfourHour ? innerDate.hoursFormatted : innerDate.twelveHoursFormatted;\r\n            innerDate.manipulate(1, Unit.hours);\r\n        });\r\n    }\r\n}","import { TempusDominus } from '../../tempus-dominus';\r\nimport { Unit } from '../../datetime';\r\nimport { Namespace } from '../../conts';\r\nimport { ActionTypes } from '../../actions';\r\n\r\nexport default class MinuteDisplay {\r\n    private context: TempusDominus;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n    }\r\n\r\n    get picker(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.classList.add(Namespace.Css.minuteContainer);\r\n\r\n        const table = document.createElement('table');\r\n        table.classList.add('table', 'table-sm'); //todo bootstrap\r\n        const tableBody = document.createElement('tbody');\r\n        let row = document.createElement('tr');\r\n        let step = this.context.options.stepping === 1 ? 5 : this.context.options.stepping;\r\n        for (let i = 0; i <= 60 / step; i++) {\r\n            if (i !== 0 && i % 4 === 0) {\r\n                tableBody.appendChild(row);\r\n                row = document.createElement('tr');\r\n            }\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.selectMinute);\r\n            td.appendChild(div);\r\n            row.appendChild(td);\r\n        }\r\n\r\n        table.appendChild(tableBody);\r\n        container.appendChild(table);\r\n\r\n        return container;\r\n    }\r\n\r\n    update(): void {\r\n        const container = this.context.display.widget.getElementsByClassName(Namespace.Css.minuteContainer)[0];\r\n        let innerDate = this.context.viewDate.clone.startOf(Unit.hours);\r\n        let step = this.context.options.stepping === 1 ? 5 : this.context.options.stepping;\r\n\r\n        container.querySelectorAll('tbody td div').forEach((containerClone: HTMLElement, index) => {\r\n            let classes = [];\r\n            classes.push(Namespace.Css.minute);\r\n\r\n            if (!this.context.validation.isValid(innerDate, Unit.minutes)) {\r\n                classes.push(Namespace.Css.disabled);\r\n            }\r\n\r\n            containerClone.classList.remove(...containerClone.classList);\r\n            containerClone.classList.add(...classes);\r\n            containerClone.setAttribute('data-value', `${innerDate.minutes}`);\r\n            containerClone.innerText = innerDate.minutesFormatted;\r\n            innerDate.manipulate(step, Unit.minutes);\r\n        });\r\n    }\r\n}","import { TempusDominus } from '../../tempus-dominus';\r\nimport { Unit } from '../../datetime';\r\nimport { Namespace } from '../../conts';\r\nimport { ActionTypes } from '../../actions';\r\n\r\nexport default class secondDisplay {\r\n    private context: TempusDominus;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n    }\r\n\r\n    get picker(): HTMLElement {\r\n        const container = document.createElement('div');\r\n        container.classList.add(Namespace.Css.secondContainer);\r\n\r\n        const table = document.createElement('table');\r\n        table.classList.add('table', 'table-sm'); //todo bootstrap\r\n        const tableBody = document.createElement('tbody');\r\n        let row = document.createElement('tr');\r\n        for (let i = 0; i <= 12; i++) {\r\n            if (i !== 0 && i % 4 === 0) {\r\n                tableBody.appendChild(row);\r\n                row = document.createElement('tr');\r\n            }\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.selectSecond);\r\n            td.appendChild(div);\r\n            row.appendChild(td);\r\n        }\r\n\r\n        table.appendChild(tableBody);\r\n        container.appendChild(table);\r\n\r\n        return container;\r\n    }\r\n\r\n    update(): void {\r\n        const container = this.context.display.widget.getElementsByClassName(Namespace.Css.secondContainer)[0];\r\n        let innerDate = this.context.viewDate.clone.startOf(Unit.minutes);\r\n\r\n        container.querySelectorAll('tbody td div').forEach((containerClone: HTMLElement, index) => {\r\n            let classes = [];\r\n            classes.push(Namespace.Css.second);\r\n\r\n            if (!this.context.validation.isValid(innerDate, Unit.seconds)) {\r\n                classes.push(Namespace.Css.disabled);\r\n            }\r\n\r\n            containerClone.classList.remove(...containerClone.classList);\r\n            containerClone.classList.add(...classes);\r\n            containerClone.setAttribute('data-value', `${innerDate.seconds}`);\r\n            containerClone.innerText = innerDate.secondsFormatted;\r\n            innerDate.manipulate(5, Unit.seconds);\r\n        });\r\n    }\r\n}","import DateDisplay from './calendar/date-display';\r\nimport MonthDisplay from './calendar/month-display';\r\nimport YearDisplay from './calendar/year-display';\r\nimport DecadeDisplay from './calendar/decade-display';\r\nimport TimeDisplay from './time/time-display';\r\nimport HourDisplay from './time/hour-display';\r\nimport MinuteDisplay from './time/minute-display';\r\nimport SecondDisplay from './time/second-display';\r\nimport { DateTime, Unit } from '../datetime';\r\nimport { DatePickerModes, Namespace } from '../conts';\r\nimport { TempusDominus } from '../tempus-dominus';\r\nimport { ActionTypes } from '../actions';\r\nimport { createPopper } from '@popperjs/core';\r\n\r\n\r\nexport default class Display {\r\n    private context: TempusDominus;\r\n    private dateDisplay: DateDisplay;\r\n    private monthDisplay: MonthDisplay;\r\n    private yearDisplay: YearDisplay;\r\n    private decadeDisplay: DecadeDisplay;\r\n    private timeDisplay: TimeDisplay;\r\n    private _widget: HTMLElement;\r\n    private hourDisplay: HourDisplay;\r\n    private minuteDisplay: MinuteDisplay;\r\n    private secondDisplay: SecondDisplay;\r\n    private popperInstance: any;\r\n    private isVisible: boolean = false;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n        this.dateDisplay = new DateDisplay(context);\r\n        this.monthDisplay = new MonthDisplay(context);\r\n        this.yearDisplay = new YearDisplay(context);\r\n        this.decadeDisplay = new DecadeDisplay(context);\r\n        this.timeDisplay = new TimeDisplay(context);\r\n        this.hourDisplay = new HourDisplay(context);\r\n        this.minuteDisplay = new MinuteDisplay(context);\r\n        this.secondDisplay = new SecondDisplay(context);\r\n\r\n        this._widget = undefined;\r\n    }\r\n\r\n    get widget(): HTMLElement {\r\n        return this._widget;\r\n    }\r\n\r\n    update(unit: Unit | 'clock' | 'calendar' | 'all'): void {\r\n        if (!this._widget) return;\r\n        //todo do I want some kind of error catching or other guards here?\r\n        switch (unit) {\r\n            case Unit.seconds:\r\n                this.secondDisplay.update();\r\n                break;\r\n            case Unit.minutes:\r\n                this.minuteDisplay.update();\r\n                break;\r\n            case Unit.hours:\r\n                this.hourDisplay.update();\r\n                break;\r\n            case Unit.date:\r\n                this.dateDisplay.update();\r\n                break;\r\n            case Unit.month:\r\n                this.monthDisplay.update();\r\n                break;\r\n            case Unit.year:\r\n                this.yearDisplay.update();\r\n                break;\r\n            case 'clock':\r\n                this.timeDisplay.update();\r\n                this.update(Unit.hours);\r\n                this.update(Unit.minutes);\r\n                this.update(Unit.seconds);\r\n                break;\r\n            case 'calendar':\r\n                this.update(Unit.date);\r\n                this.update(Unit.year);\r\n                this.update(Unit.month);\r\n                this.decadeDisplay.update();\r\n                break;\r\n            case 'all':\r\n                if (this._hasTime) {\r\n                    this.update('clock');\r\n                }\r\n                if (this._hasDate) {\r\n                    this.update('calendar');\r\n                }\r\n        }\r\n    }\r\n\r\n    show(): void {\r\n        if (this.widget == undefined) {\r\n            if (this.context.options.useCurrent) {\r\n                //todo in the td4 branch a pr changed this to allow granularity\r\n                this.context.dates._setValue(new DateTime());\r\n            }\r\n            this._buildWidget();\r\n            if (this._hasDate) {\r\n                this._showMode();\r\n            }\r\n\r\n            document.body.appendChild(this.widget);\r\n\r\n            if (this.context.options.display.viewMode == 'times') {\r\n                this.context.action.do({ currentTarget: this.widget.querySelector(`.${Namespace.Css.timeContainer}`) }, ActionTypes.showClock);\r\n            }\r\n\r\n            this.widget.querySelectorAll('[data-action]')\r\n                .forEach(element => element.addEventListener('click', (e) => {\r\n                    this.context.action.do(e);\r\n                }));\r\n\r\n\r\n            this.popperInstance = createPopper(this.context.element, this.widget, {\r\n                modifiers: [\r\n                    {\r\n                        name: 'offset',\r\n                        options: {\r\n                            offset: [0, 8]\r\n                        },\r\n                    },\r\n                    { name: 'eventListeners', enabled: true }\r\n                ],\r\n                placement: 'top'\r\n            });\r\n        }\r\n\r\n        this.widget.classList.add(Namespace.Css.show);\r\n        this.popperInstance.update();\r\n        this.context.notifyEvent(Namespace.Events.SHOW);\r\n        this.isVisible = true;\r\n    }\r\n\r\n    _showMode(direction?: number): void {\r\n        if (!this.widget) {\r\n            return;\r\n        }\r\n        if (direction) {\r\n            const max = Math.max(this.context.minViewModeNumber, Math.min(3, this.context.currentViewMode + direction));\r\n            if (this.context.currentViewMode == max) return;\r\n            this.context.currentViewMode = max;\r\n        }\r\n        this.widget.querySelectorAll(`.${Namespace.Css.dateContainer} > div, .${Namespace.Css.timeContainer} > div`)\r\n            .forEach((e: HTMLElement) => e.style.display = 'none');\r\n\r\n        const datePickerMode = DatePickerModes[this.context.currentViewMode];\r\n        let picker: HTMLElement = this.widget.querySelector(`.${datePickerMode.CLASS_NAME}`);\r\n\r\n        switch (datePickerMode.CLASS_NAME) {\r\n            case Namespace.Css.decadesContainer:\r\n                this.decadeDisplay.update();\r\n                break;\r\n            case Namespace.Css.yearsContainer:\r\n                this.yearDisplay.update();\r\n                break;\r\n            case Namespace.Css.monthsContainer:\r\n                this.monthDisplay.update();\r\n                break;\r\n            case Namespace.Css.daysContainer:\r\n                this.dateDisplay.update();\r\n                break;\r\n        }\r\n\r\n        picker.style.display = 'block';\r\n    }\r\n\r\n    hide(): void {\r\n        this.widget.classList.remove(Namespace.Css.show);\r\n\r\n        this.context.notifyEvent(Namespace.Events.HIDE, {\r\n            date: this.context.unset ? null : (this.context.dates.lastPicked ? this.context.dates.lastPicked.clone : void 0)\r\n        });\r\n        this.isVisible = false;\r\n    }\r\n\r\n    toggle() {\r\n        return this.isVisible ? this.hide() : this.show();\r\n    }\r\n\r\n    _place(): void {\r\n    }\r\n\r\n    _buildWidget(): HTMLElement {\r\n        const template = document.createElement('div');\r\n        template.classList.add(Namespace.Css.widget);\r\n        //template.classList.add('dropdown-menu'); //todo bootstrap\r\n        if (this.context.options.display.calendarWeeks)\r\n            template.classList.add(Namespace.Css.widgetCalendarWeeks);\r\n\r\n        const dateView = document.createElement('div');\r\n        dateView.classList.add(Namespace.Css.dateContainer);\r\n        dateView.appendChild(this.decadeDisplay.picker);\r\n        dateView.appendChild(this.yearDisplay.picker);\r\n        dateView.appendChild(this.monthDisplay.picker);\r\n        dateView.appendChild(this.dateDisplay.picker);\r\n\r\n        const timeView = document.createElement('div');\r\n        timeView.classList.add(Namespace.Css.timeContainer);\r\n        timeView.appendChild(this.timeDisplay.picker);\r\n        timeView.appendChild(this.hourDisplay.picker);\r\n        timeView.appendChild(this.minuteDisplay.picker);\r\n        timeView.appendChild(this.secondDisplay.picker);\r\n\r\n        const toolbar = document.createElement('div');\r\n        toolbar.classList.add(Namespace.Css.switch);\r\n        toolbar.appendChild(this._toolbar);\r\n\r\n        if (this.context.options.display.components.useTwentyfourHour) {\r\n            template.classList.add(Namespace.Css.useTwentyfour);\r\n        }\r\n\r\n        if (this.context.options.display.components.seconds && !this.context.options.display.components.useTwentyfourHour) {\r\n            template.classList.add(Namespace.Css.wider);\r\n        }\r\n\r\n        if (this.context.options.display.sideBySide && this._hasDate && this._hasTime) {\r\n            template.classList.add(Namespace.Css.sideBySide);\r\n            if (this.context.options.display.toolbarPlacement === 'top') {\r\n                template.appendChild(toolbar);\r\n            }\r\n            const row = document.createElement('div');\r\n            row.classList.add('row'); //todo bootstrap\r\n            dateView.classList.add('col-md-6');\r\n            timeView.classList.add('col-md-6');\r\n\r\n            row.appendChild(dateView);\r\n            row.appendChild(timeView);\r\n\r\n            if (this.context.options.display.toolbarPlacement === 'bottom' || this.context.options.display.toolbarPlacement === 'default') {\r\n                template.appendChild(toolbar);\r\n            }\r\n            this._widget = template;\r\n            return;\r\n        }\r\n\r\n        //const content = document.createElement('div');\r\n\r\n        if (this.context.options.display.toolbarPlacement === 'top') {\r\n            template.appendChild(toolbar);\r\n        }\r\n        if (this._hasDate) {\r\n            if (this.context.options.display.collapse && this._hasTime) {\r\n                dateView.classList.add(Namespace.Css.collapse);\r\n                if (this.context.options.display.viewMode !== 'times') dateView.classList.add(Namespace.Css.show);\r\n            }\r\n            template.appendChild(dateView);\r\n        }\r\n        if (this.context.options.display.toolbarPlacement === 'default') {\r\n            template.appendChild(toolbar);\r\n        }\r\n        if (this._hasTime) {\r\n            if (this.context.options.display.collapse && this._hasDate) {\r\n                timeView.classList.add(Namespace.Css.collapse);\r\n                if (this.context.options.display.viewMode === 'times') timeView.classList.add(Namespace.Css.show);\r\n            }\r\n            template.appendChild(timeView);\r\n        }\r\n        if (this.context.options.display.toolbarPlacement === 'bottom') {\r\n            template.appendChild(toolbar);\r\n        }\r\n\r\n        const arrow = document.createElement('div');\r\n        arrow.classList.add('arrow');\r\n        arrow.setAttribute('data-popper-arrow', '');\r\n        template.appendChild(arrow);\r\n\r\n        this._widget = template;\r\n    }\r\n\r\n    get _hasTime(): boolean {\r\n        return this.context.options.display.components.hours || this.context.options.display.components.minutes || this.context.options.display.components.seconds;\r\n    }\r\n\r\n    get _hasDate(): boolean {\r\n        return this.context.options.display.components.year || this.context.options.display.components.month || this.context.options.display.components.date;\r\n    }\r\n\r\n    get _toolbar(): HTMLTableElement {\r\n        const tbody = document.createElement('tbody');\r\n\r\n        if (this.context.options.display.buttons.today) {\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.today);\r\n            div.setAttribute('title', this.context.options.localization.today);\r\n\r\n            div.appendChild(this.iconTag(this.context.options.display.icons.today));\r\n            td.appendChild(div);\r\n            tbody.appendChild(td);\r\n        }\r\n        if (!this.context.options.display.sideBySide && this.context.options.display.collapse && this._hasDate && this._hasTime) {\r\n            let title, icon;\r\n            if (this.context.options.display.viewMode === 'times') {\r\n                title = this.context.options.localization.selectDate;\r\n                icon = this.context.options.display.icons.date;\r\n            } else {\r\n                title = this.context.options.localization.selectTime;\r\n                icon = this.context.options.display.icons.time;\r\n            }\r\n\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.togglePicker);\r\n            div.setAttribute('title', title);\r\n\r\n            div.appendChild(this.iconTag(icon));\r\n            td.appendChild(div);\r\n            tbody.appendChild(td);\r\n        }\r\n        if (this.context.options.display.buttons.clear) {\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.clear);\r\n            div.setAttribute('title', this.context.options.localization.clear);\r\n\r\n            div.appendChild(this.iconTag(this.context.options.display.icons.clear));\r\n            td.appendChild(div);\r\n            tbody.appendChild(td);\r\n        }\r\n        if (this.context.options.display.buttons.close) {\r\n            const td = document.createElement('td');\r\n            const div = document.createElement('div');\r\n            div.setAttribute('data-action', ActionTypes.close);\r\n            div.setAttribute('title', this.context.options.localization.close);\r\n\r\n            div.appendChild(this.iconTag(this.context.options.display.icons.close));\r\n            td.appendChild(div);\r\n            tbody.appendChild(td);\r\n        }\r\n        const table = document.createElement('table');\r\n        table.appendChild(tbody);\r\n\r\n        return table;\r\n    }\r\n\r\n    /***\r\n     *\r\n     */\r\n    get headTemplate(): HTMLElement {\r\n        let div = document.createElement('div');\r\n        const headTemplate = document.createElement('thead');\r\n        const previous = document.createElement('th');\r\n        previous.classList.add(Namespace.Css.previous);\r\n        previous.setAttribute('data-action', ActionTypes.previous);\r\n        div.appendChild(this.iconTag(this.context.options.display.icons.previous));\r\n        previous.appendChild(div);\r\n        headTemplate.appendChild(previous);\r\n\r\n        const switcher = document.createElement('th');\r\n        switcher.classList.add(Namespace.Css.switch);\r\n        switcher.setAttribute('data-action', ActionTypes.pickerSwitch);\r\n        switcher.setAttribute('colspan', this.context.options.display.calendarWeeks ? '6' : '5');\r\n        headTemplate.appendChild(switcher);\r\n\r\n        const next = document.createElement('th');\r\n        next.classList.add(Namespace.Css.next);\r\n        next.setAttribute('data-action', ActionTypes.next);\r\n        div = document.createElement('div');\r\n        div.appendChild(this.iconTag(this.context.options.display.icons.next));\r\n        next.appendChild(div);\r\n        headTemplate.appendChild(next);\r\n        return <HTMLElement>headTemplate.cloneNode(true);\r\n    }\r\n\r\n    iconTag(i): HTMLElement {\r\n        if (this.context.options.display.icons.type === 'sprites') {\r\n            const svg = document.createElement('svg');\r\n            svg.innerHTML = `<use xlink:href=\"${i}\"></use>`\r\n            return svg;\r\n        }\r\n        const icon = document.createElement('i');\r\n        DOMTokenList.prototype.add.apply(icon.classList, i.split(' '));\r\n        return icon;\r\n    }\r\n}","import { TempusDominus } from './tempus-dominus';\r\nimport { DateTime, Unit } from './datetime';\r\nimport Dates from './dates';\r\n\r\nexport default class Validation {\r\n    private context: TempusDominus;\r\n\r\n    constructor(context: TempusDominus) {\r\n        this.context = context;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param targetDate\r\n     * @param granularity\r\n     */\r\n    isValid(targetDate: DateTime, granularity?: Unit): boolean {\r\n        if (granularity === Unit.date) {\r\n            if (this.context.options.restrictions.disabledDates && this._isInDisabledDates(targetDate)) {\r\n                return false;\r\n            }\r\n            if (this.context.options.restrictions.enabledDates && !this._isInEnabledDates(targetDate)) {\r\n                return false;\r\n            }\r\n            if (this.context.options.restrictions.daysOfWeekDisabled && this.context.options.restrictions.daysOfWeekDisabled.indexOf(targetDate.weekDay) !== -1) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        if (this.context.options.restrictions.minDate && targetDate.isBefore(this.context.options.restrictions.minDate, granularity)) {\r\n            return false;\r\n        }\r\n        if (this.context.options.restrictions.maxDate && targetDate.isAfter(this.context.options.restrictions.maxDate, granularity)) {\r\n            return false;\r\n        }\r\n\r\n        if (granularity === Unit.hours || granularity === Unit.minutes || granularity === Unit.seconds) {\r\n            if (this.context.options.restrictions.disabledHours && this._isInDisabledHours(targetDate)) {\r\n                return false;\r\n            }\r\n            if (this.context.options.restrictions.enabledHours && !this._isInEnabledHours(targetDate)) {\r\n                return false;\r\n            }\r\n            if (this.context.options.restrictions.disabledTimeIntervals) {\r\n                for (let i = 0; i < this.context.options.restrictions.disabledTimeIntervals.length; i++) {\r\n                    if (targetDate.isBetween(this.context.options.restrictions.disabledTimeIntervals[i],\r\n                        this.context.options.restrictions.disabledTimeIntervals[i + 1])) return false;\r\n                    i++;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    _isInDisabledDates(testDate: DateTime) {\r\n        if (!this.context.options.restrictions.disabledDates || this.context.options.restrictions.disabledDates.length === 0)\r\n            return false;\r\n        const formattedDate = testDate.format(Dates.getFormatByUnit(Unit.date));\r\n        return this.context.options.restrictions.disabledDates.map(x => x.format(Dates.getFormatByUnit(Unit.date))).find(x => x === formattedDate);\r\n    }\r\n\r\n    _isInEnabledDates(testDate: DateTime) {\r\n        if (!this.context.options.restrictions.enabledDates || this.context.options.restrictions.enabledDates.length === 0)\r\n            return true;\r\n        const formattedDate = testDate.format(Dates.getFormatByUnit(Unit.date));\r\n        return this.context.options.restrictions.enabledDates.map(x => x.format(Dates.getFormatByUnit(Unit.date))).find(x => x === formattedDate);\r\n    }\r\n\r\n    _isInDisabledHours(testDate: DateTime) {\r\n        if (!this.context.options.restrictions.disabledHours || this.context.options.restrictions.disabledHours.length === 0)\r\n            return false;\r\n        const formattedDate = testDate.hours;\r\n        return this.context.options.restrictions.disabledHours.find(x => x === formattedDate);\r\n    }\r\n\r\n    _isInEnabledHours(testDate: DateTime) {\r\n        if (!this.context.options.restrictions.enabledHours || this.context.options.restrictions.enabledHours.length === 0)\r\n            return true;\r\n        const formattedDate = testDate.hours;\r\n        return this.context.options.restrictions.enabledHours.find(x => x === formattedDate);\r\n    }\r\n}","import Display from './display/index';\r\nimport Validation from './validation';\r\nimport Dates from './dates';\r\n\r\nimport Actions, {ActionTypes} from './actions';\r\nimport {DefaultOptions, Namespace, Options} from './conts';\r\nimport {DateTime, Unit} from './datetime';\r\n\r\nexport class TempusDominus {\r\n    options: Options;\r\n    element: HTMLElement;\r\n    input: HTMLInputElement;\r\n    toggle: HTMLElement;\r\n    viewDate: DateTime;\r\n    currentViewMode: number;\r\n    unset: boolean;\r\n    minViewModeNumber: number;\r\n    display: Display;\r\n    validation: Validation;\r\n    dates: Dates;\r\n    action: Actions;\r\n    _notifyChangeEventContext: number;\r\n    private _currentPromptTimeTimeout: any;\r\n\r\n\r\n    constructor(element, options: Options) {\r\n        this.options = this.initializeOptions(options, DefaultOptions);\r\n        this.element = element;\r\n        this.viewDate = new DateTime();\r\n        this.currentViewMode = null;\r\n        this.unset = true;\r\n        this.minViewModeNumber = 0;\r\n\r\n        this.display = new Display(this);\r\n        this.validation = new Validation(this);\r\n        this.dates = new Dates(this);\r\n        this.action = new Actions(this);\r\n\r\n        this.initializeViewMode();\r\n        this.initializeInput();\r\n        this.initializeToggle();\r\n    }\r\n\r\n\r\n    // noinspection JSUnusedGlobalSymbols\r\n    /**\r\n     *\r\n     * @param options\r\n     * @param reset\r\n     * @public\r\n     */\r\n    updateOptions(options, reset = false): void {\r\n        if (reset)\r\n            this.options = this.initializeOptions(options, DefaultOptions);\r\n        else\r\n            this.options = this.initializeOptions(options, this.options);\r\n    }\r\n\r\n    private initializeOptions(config: Options, mergeTo: Options): Options {\r\n        const dateArray = (optionName: string, value, providedType: string) => {\r\n            if (!Array.isArray(value)) {\r\n                throw Namespace.ErrorMessages.typeMismatch(optionName, providedType, 'array of DateTime or Date');\r\n            }\r\n            for (let i = 0; i < value.length; i++) {\r\n                let d = value[i];\r\n                const dateTime = dateConversion(d, optionName);\r\n                if (dateTime !== undefined) {\r\n                    value[i] = dateTime;\r\n                    continue;\r\n                }\r\n                throw Namespace.ErrorMessages.typeMismatch(optionName, typeof d, 'DateTime or Date');\r\n            }\r\n        }\r\n        const numberArray = (optionName: string, value, providedType: string) => {\r\n            if (!Array.isArray(value)) {\r\n                throw Namespace.ErrorMessages.typeMismatch(optionName, providedType, 'array of numbers');\r\n            }\r\n            if (value.find(x => typeof x !== typeof 0)) console.log('throw an error');\r\n            return;\r\n        }\r\n        const dateConversion = (d: any, optionName: string) => {\r\n            if (d.constructor.name === 'DateTime') return d;\r\n            if (d.constructor.name === 'Date') {\r\n                return DateTime.convert(d);\r\n            }\r\n            if (typeof d === typeof '') {\r\n                const dateTime = new DateTime(d);\r\n                if (JSON.stringify(dateTime) === 'null') {\r\n                    throw Namespace.ErrorMessages.failedToParseDate(optionName, d);\r\n                }\r\n                console.warn(Namespace.ErrorMessages.dateString);\r\n                return dateTime;\r\n            }\r\n            return undefined;\r\n        }\r\n\r\n        //the spread operator caused sub keys to be missing after merging\r\n        //this is to fix that issue by using spread on the child objects first\r\n        let path = '';\r\n        const spread = (provided, defaultOption) => {\r\n            Object.keys(provided).forEach(key => {\r\n                let providedType = typeof provided[key];\r\n                if (providedType === undefined) return;\r\n                path += `.${key}`;\r\n                let defaultType = typeof defaultOption[key];\r\n                let value = provided[key];\r\n                if (!value) return;//todo not sure if null checking here is right\r\n                switch (key) {\r\n                    case 'viewDate': {\r\n                        const dateTime = dateConversion(value, 'viewDate');\r\n                        if (dateTime !== undefined) {\r\n                            provided[key] = dateTime;\r\n                            break;\r\n                        }\r\n                        throw Namespace.ErrorMessages.typeMismatch('viewDate', providedType, 'DateTime or Date');\r\n                    }\r\n                    case 'minDate': {\r\n                        const dateTime = dateConversion(value, 'restrictions.minDate');\r\n                        if (dateTime !== undefined) {\r\n                            provided[key] = dateTime;\r\n                            break;\r\n                        }\r\n                        throw Namespace.ErrorMessages.typeMismatch('restrictions.minDate', providedType, 'DateTime or Date');\r\n                    }\r\n                    case 'maxDate': {\r\n                        const dateTime = dateConversion(value, 'restrictions.maxDate');\r\n                        if (dateTime !== undefined) {\r\n                            provided[key] = dateTime;\r\n                            break;\r\n                        }\r\n                        throw Namespace.ErrorMessages.typeMismatch('restrictions.maxDate', providedType, 'DateTime or Date');\r\n                    }\r\n                    case 'disabledHours':\r\n                        numberArray('restrictions.disabledHours', value, providedType);\r\n                        if (value.filter(x => x < 0 || x > 23))\r\n                            throw Namespace.ErrorMessages.numbersOutOfRage('restrictions.disabledHours', 0, 23);\r\n                        break;\r\n                    case 'enabledHours':\r\n                        numberArray('restrictions.enabledHours', value, providedType);\r\n                        if (value.filter(x => x < 0 || x > 23))\r\n                            throw Namespace.ErrorMessages.numbersOutOfRage('restrictions.enabledHours', 0, 23);\r\n                        break;\r\n                    case 'daysOfWeekDisabled':\r\n                        numberArray(\r\n                            'restrictions.daysOfWeekDisabled',\r\n                            value,\r\n                            providedType\r\n                        );\r\n                        if (value.filter(x => x < 0 || x > 6))\r\n                            throw Namespace.ErrorMessages.numbersOutOfRage('restrictions.daysOfWeekDisabled', 0, 6);\r\n                        break;\r\n                    case 'enabledDates':\r\n                        dateArray('restrictions.enabledDates', value, providedType);\r\n                        break;\r\n                    case 'disabledDates':\r\n                        dateArray('restrictions.disabledDates', value, providedType);\r\n                        break;\r\n                    case 'disabledTimeIntervals':\r\n                        dateArray(\r\n                            'restrictions.disabledTimeIntervals',\r\n                            value,\r\n                            providedType\r\n                        );\r\n                        break;\r\n                    default:\r\n                        if (providedType !== defaultType) {\r\n                            if (defaultType === typeof undefined) throw Namespace.ErrorMessages.unexpectedOption(path.substring(1));\r\n                            throw Namespace.ErrorMessages.typeMismatch(path.substring(1), providedType, defaultType);\r\n                        }\r\n                        break;\r\n                }\r\n\r\n                if (typeof defaultOption[key] !== 'object') {\r\n                    path = path.substring(0, path.lastIndexOf(`.${key}`));\r\n                    return;\r\n                }\r\n                if (!Array.isArray(provided[key]) && provided[key] != null) {\r\n                    spread(provided[key], defaultOption[key]);\r\n                    path = path.substring(0, path.lastIndexOf(`.${key}`));\r\n                    provided[key] = { ...defaultOption[key], ...provided[key] };\r\n                }\r\n                path = path.substring(0, path.lastIndexOf(`.${key}`));\r\n            });\r\n        }\r\n        spread(config, mergeTo);\r\n\r\n        config = {\r\n            ...mergeTo,\r\n            ...config\r\n        }\r\n\r\n        return config\r\n    }\r\n\r\n    private initializeViewMode() {\r\n        if (this.options.display.components.year) {\r\n            this.minViewModeNumber = 2;\r\n        }\r\n        if (this.options.display.components.month) {\r\n            this.minViewModeNumber = 1;\r\n        }\r\n        if (this.options.display.components.date) {\r\n            this.minViewModeNumber = 0;\r\n        }\r\n\r\n        this.currentViewMode = Math.max(this.minViewModeNumber, this.currentViewMode);\r\n    }\r\n\r\n    private initializeInput() {\r\n        if (this.element.tagName == 'INPUT') {\r\n            this.input = this.element as HTMLInputElement;\r\n        } else {\r\n            let query = this.element.dataset.targetInput;\r\n            if (query == undefined || query == 'nearest') {\r\n                this.input = this.element.querySelector('input');\r\n            } else {\r\n                this.input = this.element.querySelector(query);\r\n            }\r\n        }\r\n        this.input?.addEventListener('change', (ev) => {\r\n            let strValue = this.input.value;\r\n            //03/27/2021, 20:13:56\r\n            let valArray = strValue.split(/\\D/).filter(x => x.length).map(x => parseInt(x));\r\n            let valIndex = 0;\r\n            let targetDate = this.viewDate.clone;\r\n            if (this.display._hasDate) {\r\n                targetDate.month = valArray[valIndex++] - 1;\r\n                targetDate.date = valArray[valIndex++];\r\n                targetDate.year = valArray[valIndex++];\r\n            }\r\n            if (this.options.display.components.hours) {\r\n                let twentyFourModifier = 0;\r\n                if (!this.options.display.components.useTwentyfourHour) {\r\n                    if (strValue.includes('PM')) {\r\n                        twentyFourModifier = 12;\r\n                    } else if (valArray[valIndex] == 12) {\r\n                        twentyFourModifier = -12;\r\n                    }\r\n                } else if (valArray[valIndex] == 24) {\r\n                    twentyFourModifier = -24;\r\n                }\r\n                targetDate.hours = valArray[valIndex++] + twentyFourModifier;\r\n            }\r\n            if (this.options.display.components.minutes) {\r\n                targetDate.minutes = valArray[valIndex++];\r\n            }\r\n            if (this.options.display.components.seconds) {\r\n                targetDate.seconds = valArray[valIndex]\r\n            }\r\n            this.dates._setValue(targetDate);\r\n        });\r\n    }\r\n\r\n    private initializeToggle() {\r\n        let query = this.element.dataset.targetToggle;\r\n        if (query == 'nearest'){\r\n            query = '[data-toggle=\"datetimepicker\"]';\r\n        }\r\n        this.toggle = query == undefined ? this.element : this.element.querySelector(query);\r\n        this.toggle.addEventListener('click', () => this.display.toggle());\r\n    }\r\n    \r\n    notifyEvent(event: string, args?) {\r\n        console.log(`notify: ${event}`, JSON.stringify(args, null, 2));\r\n        if (event === Namespace.Events.CHANGE) {\r\n            this._notifyChangeEventContext = this._notifyChangeEventContext || 0;\r\n            this._notifyChangeEventContext++;\r\n            if (\r\n                (args.date && args.oldDate && args.date.isSame(args.oldDate))\r\n                ||\r\n                (!args.isClear && !args.date && !args.oldDate)\r\n                ||\r\n                (this._notifyChangeEventContext > 1)\r\n            ) {\r\n                this._notifyChangeEventContext = undefined;\r\n                return;\r\n            }\r\n            this.handlePromptTimeIfNeeded(args);\r\n        }\r\n\r\n        const evt = new CustomEvent(event, args);\r\n        this.element.dispatchEvent(evt);\r\n\r\n\r\n        //this.element.trigger(event); //todo jquery\r\n        this._notifyChangeEventContext = void 0;\r\n    }\r\n\r\n    private handlePromptTimeIfNeeded(e) {\r\n        if (this.options.promptTimeOnDateChange) {\r\n            if (!e.oldDate && this.options.useCurrent) {\r\n                // First time ever. If useCurrent option is set to true (default), do nothing\r\n                // because the first date is selected automatically.\r\n                return;\r\n            } else if (\r\n                e.oldDate &&\r\n                e.date &&\r\n                e.data.isSame(e.oldDate)\r\n            ) {\r\n                // Date didn't change (time did) or date changed because time did.\r\n                return;\r\n            }\r\n\r\n            clearTimeout(this._currentPromptTimeTimeout);\r\n            this._currentPromptTimeTimeout = setTimeout(() => {\r\n                if (this.display.widget) {\r\n                    this.display.widget.querySelector(`[data-action=\"${ActionTypes.togglePicker}\"]`)[0].click();\r\n                }\r\n            }, this.options.promptTimeOnDateChangeTransitionDelay);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {Unit} unit\r\n     * @private\r\n     */\r\n    viewUpdate(unit: Unit) {\r\n        this.notifyEvent(Namespace.Events.UPDATE, {\r\n            change: unit,\r\n            viewDate: this.viewDate.clone\r\n        });\r\n    }\r\n}"],"names":["SecondDisplay","createPopper"],"mappings":"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"}